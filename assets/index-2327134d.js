(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();const style="";class CustomWindow extends HTMLElement{constructor(){super()}get windowManager(){return this.parentElement.parentElement}set created(e){this.setAttribute("created",e)}get created(){return this.hasAttribute("created")?this.getAttribute("created")==="true":!1}set title(e){this.setAttribute("title",e)}get title(){return this.hasAttribute("title")||this.setAttribute("title","empty"),this.getAttribute("title")}set content(e){this._content=e}get content(){return this._content==null?"Empty":this._content}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".window-content").focus()}removeWindow(){this.parentElement&&(this.windowManager&&console.log(this.windowManager.selectedWindow),this.parentElement.children.length==1&&this.parentElement.remove(),this.remove())}connectedCallback(){if(!this.created||this.reloadEverytime){this.created=!0,this.basicStructure();let e=document.createElement("div");e.classList.add("basic-buttons"),e.innerHTML='<i class="ti ti-arrows-move window-move-button window-button"></i><i class="ti ti-x window-close-button window-button"></i>',this.querySelector(".window-buttons").appendChild(e),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.addEventListener("mouseover",()=>{this.customFocus()}),document.addEventListener("mousemove",n=>{r(n)}),this.querySelector(".window-move-button").addEventListener("mousedown",n=>{this.classList.contains("follow-cusor")||(this.classList.add("follow-cursor"),this.classList.add("window-floating"),r(n))}),this.querySelector(".window-move-button").addEventListener("mouseup",n=>{this.classList.contains("follow-cursor")&&(this.classList.remove("follow-cursor"),this.classList.remove("window-floating"))});const r=n=>{let l=this.querySelector(".window-move-button").getBoundingClientRect(),u=this.getBoundingClientRect(),s=l.left-u.left,c=l.top-u.top;this.classList.contains("follow-cursor")&&(this.style.top=n.clientY-(c+l.height*2.5)+"px",this.style.left=n.clientX-(s+l.width)+"px")}}}basicStructure(){this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">
          <i class="ti ti-x window-close-button"></i>
        </div>
      </div>
      <div class="window-content">
        ${this.content}
      </div>
    `,this.querySelector(".window-content").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.addEventListener("mouseover",()=>{this.customFocus()}),this.querySelector(".window-title").innerHTML=this.title}}customElements.define("custom-window",CustomWindow);class CodeEditor extends CustomWindow{constructor(){super()}get content(){return this._content==null?"":this._content}set content(e){this._content=e,this.querySelector(".custom-text-editor").innerHTML=e}saveContent(){emulator.remove(this.file).then(()=>{emulator.write(this.file,this.content).then(saveState)}).catch(()=>{emulator.write(this.file,this.content).then(saveState)}),console.log(this.file,this.content,"CONTENT")}set file(e){this._file=e}get file(){return this._file==null&&(this._file="new file"),this._file}static new(e){let r=document.createElement("code-editor");return r.file=e,console.log("E",emulator),emulator.read(e).then(n=>{console.log(n),r.content=n,r.parseTextEditor()}),r}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".custom-text-editor").focus()}parseTextEditor(){let e=this.querySelector(".custom-text-editor").value,r=e.split(`
`).length,n=this.querySelector(".custom-text-editor-columns");this.content=e,console.log(this.content,"CONTENT"),n.innerHTML="";for(let i=1;i<r+1;i++){let l=document.createElement("p");l.innerText=i,n.appendChild(l)}this.querySelector(".custom-text-editor").style.height=this.querySelector(".custom-text-editor-columns").clientHeight+"px"}basicStructure(){this.title=`code editor - ${this.file}`,this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">          
          <i class="ti ti-player-play code-run-button window-button"></i>
          <select class="code-type-choose window-input">
            <option value="auto">automatic</option>
            <option value="javascript">javascript</option>
            <option value="html">html</option>
            <option value="python">python</option>
          </select>
          <i class="ti ti-device-floppy code-save-button window-button"></i>
          <i class="ti ti-download window-download-button window-button"></i>
        </div>
      </div>
      <div class="window-content">
        <div class='custom-text-editor-columns'>1</div>
        <textarea wrap='off' class='custom-text-editor' spellcheck='false'>
        
        </textarea>
      </div>
    `,this.querySelector(".custom-text-editor").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-download-button").addEventListener("click",()=>{function e(r,n){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(n)),i.setAttribute("download",r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}emulator.read(this.file).then(r=>e(this.file,r))}),this.querySelector(".custom-text-editor").addEventListener("input",e=>{this.parseTextEditor()}),this.querySelector(".custom-text-editor").addEventListener("keydown",e=>{console.log(e.key),e.key=="Tab"&&(e.preventDefault(),document.execCommand("insertText",!1,"	"),this.parseTextEditor())}),this.querySelector(".code-save-button").addEventListener("click",()=>{this.saveContent()}),this.querySelector(".code-run-button").addEventListener("click",()=>{this.saveContent();let e=this.querySelector(".code-type-choose").value,n=this.file.split(".")[1];if(e=="auto")switch(n){case"js":e="javascript";break;case"py":e="python";break;case"html":e="html";break}switch(e){case"html":document.querySelector("window-manager").createNewWindow(IFrameWindow.new(this.file));break;case"javascript":document.querySelector("window-manager").createNewWindow(TerminalEmulator.new(`run ${this.file}`));break;case"python":document.querySelector("window-manager").createNewWindow(TerminalEmulator.new(`python ${this.file}`));break}}),this.querySelector(".window-title").innerHTML=this.title,this.addEventListener("mouseover",()=>{this.customFocus()})}}customElements.define("code-editor",CodeEditor);function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var l=Function.bind.apply(e,i);return new l}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var toStr$3=Object.prototype.toString,isArguments=function(e){var r=toStr$3.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&toStr$3.call(e.callee)==="[object Function]"),n},implementation$5,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$5;hasRequiredImplementation=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=isArguments,i=Object.prototype.propertyIsEnumerable,l=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(d){var m=d.constructor;return m&&m.prototype===d},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!f["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{c(window[d])}catch{return!0}}catch{return!0}return!1}(),y=function(d){if(typeof window>"u"||!p)return c(d);try{return c(d)}catch{return!1}};t=function(m){var S=m!==null&&typeof m=="object",P=r.call(m)==="[object Function]",O=n(m),j=S&&r.call(m)==="[object String]",A=[];if(!S&&!P&&!O)throw new TypeError("Object.keys called on a non-object");var E=u&&P;if(j&&m.length>0&&!e.call(m,0))for(var b=0;b<m.length;++b)A.push(String(b));if(O&&m.length>0)for(var q=0;q<m.length;++q)A.push(String(q));else for(var F in m)!(E&&F==="prototype")&&e.call(m,F)&&A.push(String(F));if(l)for(var G=y(m),$=0;$<s.length;++$)!(G&&s[$]==="constructor")&&e.call(m,s[$])&&A.push(s[$]);return A}}return implementation$5=t,implementation$5}var slice$1=Array.prototype.slice,isArgs=isArguments,origKeys=Object.keys,keysShim=origKeys?function(e){return origKeys(e)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return isArgs(n)?originalKeys(slice$1.call(n)):originalKeys(n)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys=keysShim,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,r);if(u.value!==i||u.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$2=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr$2=Object.prototype.toString,funcType="[object Function]",implementation$4=function(e){var r=this;if(typeof r!="function"||toStr$2.call(r)!==funcType)throw new TypeError(ERROR_MESSAGE+r);for(var n=slice.call(arguments,1),i,l=function(){if(this instanceof i){var p=r.apply(this,n.concat(slice.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(slice.call(arguments)))},u=Math.max(0,r.length-n.length),s=[],c=0;c<u;c++)s.push("$"+c);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(l),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i},implementation$3=implementation$4,functionBind=Function.prototype.bind||implementation$3,bind$1=functionBind,src$1=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$6=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$6},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$1=hasSymbols$2(),getProto=Object.getPrototypeOf||function(t){return t.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$1?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$1?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$1?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$1?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$1?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$1?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$6,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};try{null.error}catch(t){var errorProto=getProto(getProto(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var r;if(e==="%AsyncFunction%")r=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")r=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=getProto(i.prototype))}return INTRINSICS[e]=r,r},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=src$1,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var r=$strSlice(e,0,1),n=$strSlice(e,-1);if(r==="%"&&n!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var i=[];return $replace(e,rePropName,function(l,u,s,c){i[i.length]=s?$replace(c,reEscapeChar,"$1"):u||l}),i},getBaseIntrinsic=function(e,r){var n=e,i;if(hasOwn(LEGACY_ALIASES,n)&&(i=LEGACY_ALIASES[n],n="%"+i[0]+"%"),hasOwn(INTRINSICS,n)){var l=INTRINSICS[n];if(l===needsEval&&(l=doEval(n)),typeof l>"u"&&!r)throw new $TypeError$6("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:l}}throw new $SyntaxError("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,r){if(typeof e!="string"||e.length===0)throw new $TypeError$6("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new $TypeError$6('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=stringToPath(e),i=n.length>0?n[0]:"",l=getBaseIntrinsic("%"+i+"%",r),u=l.name,s=l.value,c=!1,f=l.alias;f&&(i=f[0],$spliceApply(n,$concat([0,1],f)));for(var p=1,y=!0;p<n.length;p+=1){var d=n[p],m=$strSlice(d,0,1),S=$strSlice(d,-1);if((m==='"'||m==="'"||m==="`"||S==='"'||S==="'"||S==="`")&&m!==S)throw new $SyntaxError("property names with quotes must have matching quotes");if((d==="constructor"||!y)&&(c=!0),i+="."+d,u="%"+i+"%",hasOwn(INTRINSICS,u))s=INTRINSICS[u];else if(s!=null){if(!(d in s)){if(!r)throw new $TypeError$6("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD&&p+1>=n.length){var P=$gOPD(s,d);y=!!P,y&&"get"in P&&!("originalValue"in P.get)?s=P.get:s=s[d]}else y=hasOwn(s,d),s=s[d];y&&!c&&(INTRINSICS[u]=s)}}return s},GetIntrinsic$7=getIntrinsic,$defineProperty=GetIntrinsic$7("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,keys=objectKeys,hasSymbols=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr$1=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction=function(t){return typeof t=="function"&&toStr$1.call(t)==="[object Function]"},hasPropertyDescriptors=hasPropertyDescriptors_1(),supportsDescriptors=origDefineProperty&&hasPropertyDescriptors,defineProperty=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!isFunction(n)||!n())return}supportsDescriptors?origDefineProperty(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r},defineProperties=function(t,e){var r=arguments.length>2?arguments[2]:{},n=keys(e);hasSymbols&&(n=concat.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)defineProperty(t,n[i],e[n[i]],r[n[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors;var defineProperties_1=defineProperties,RequireObjectCoercibleExports={},RequireObjectCoercible$2={get exports(){return RequireObjectCoercibleExports},set exports(t){RequireObjectCoercibleExports=t}},GetIntrinsic$6=getIntrinsic,$TypeError$5=GetIntrinsic$6("%TypeError%"),CheckObjectCoercible=function(e,r){if(e==null)throw new $TypeError$5(r||"Cannot call method on "+e);return e};(function(t){t.exports=CheckObjectCoercible})(RequireObjectCoercible$2);var callBindExports={},callBind$2={get exports(){return callBindExports},set exports(t){callBindExports=t}};(function(t){var e=functionBind,r=getIntrinsic,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),l=r("%Reflect.apply%",!0)||e.call(i,n),u=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(y){var d=l(e,i,arguments);if(u&&s){var m=u(d,"length");m.configurable&&s(d,"length",{value:1+c(0,y.length-(arguments.length-1))})}return d};var f=function(){return l(e,n,arguments)};s?s(t.exports,"apply",{value:f}):t.exports.apply=f})(callBind$2);var GetIntrinsic$5=getIntrinsic,callBind$1=callBindExports,$indexOf=callBind$1(GetIntrinsic$5("String.prototype.indexOf")),callBound$2=function(e,r){var n=GetIntrinsic$5(e,!!r);return typeof n=="function"&&$indexOf(e,".prototype.")>-1?callBind$1(n):n},IsArrayExports={},IsArray$2={get exports(){return IsArrayExports},set exports(t){IsArrayExports=t}},IsArray$1,hasRequiredIsArray$1;function requireIsArray$1(){if(hasRequiredIsArray$1)return IsArray$1;hasRequiredIsArray$1=1;var t=getIntrinsic,e=t("%Array%"),r=!e.isArray&&callBound$2("Object.prototype.toString");return IsArray$1=e.isArray||function(i){return r(i)==="[object Array]"},IsArray$1}var hasRequiredIsArray;function requireIsArray(){return hasRequiredIsArray||(hasRequiredIsArray=1,function(t){t.exports=requireIsArray$1()}(IsArray$2)),IsArrayExports}var GetIntrinsic$4=getIntrinsic,callBound$1=callBound$2,$TypeError$4=GetIntrinsic$4("%TypeError%"),IsArray=requireIsArray(),$apply=GetIntrinsic$4("%Reflect.apply%",!0)||callBound$1("%Function.prototype.apply%"),Call$1=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!IsArray(n))throw new $TypeError$4("Assertion failed: optional `argumentsList`, if provided, must be a List");return $apply(e,r,n)};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,l=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=i&&l&&typeof l.get=="function"?l.get:null,s=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,f=c?WeakMap.prototype.has:null,p=typeof WeakSet=="function"&&WeakSet.prototype,y=p?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,S=Boolean.prototype.valueOf,P=Object.prototype.toString,O=Function.prototype.toString,j=String.prototype.match,A=String.prototype.slice,E=String.prototype.replace,b=String.prototype.toUpperCase,q=String.prototype.toLowerCase,F=RegExp.prototype.test,G=Array.prototype.concat,$=Array.prototype.join,Ae=Array.prototype.slice,se=Math.floor,z=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Y=Object.getOwnPropertySymbols,J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,D=typeof Symbol=="function"&&typeof Symbol.iterator=="object",I=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===D||"symbol")?Symbol.toStringTag:null,le=Object.prototype.propertyIsEnumerable,ue=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(o){return o.__proto__}:null);function ce(o,a){if(o===1/0||o===-1/0||o!==o||o&&o>-1e3&&o<1e3||F.call(/e/,a))return a;var v=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof o=="number"){var g=o<0?-se(-o):se(o);if(g!==o){var w=String(g),h=A.call(a,w.length+1);return E.call(w,v,"$&_")+"."+E.call(E.call(h,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(a,v,"$&_")}var V=require$$0,fe=V.custom,pe=me(fe)?fe:null;objectInspect=function o(a,v,g,w){var h=v||{};if(R(h,"quoteStyle")&&h.quoteStyle!=="single"&&h.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(R(h,"maxStringLength")&&(typeof h.maxStringLength=="number"?h.maxStringLength<0&&h.maxStringLength!==1/0:h.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var C=R(h,"customInspect")?h.customInspect:!0;if(typeof C!="boolean"&&C!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(R(h,"indent")&&h.indent!==null&&h.indent!=="	"&&!(parseInt(h.indent,10)===h.indent&&h.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(R(h,"numericSeparator")&&typeof h.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var L=h.numericSeparator;if(typeof a>"u")return"undefined";if(a===null)return"null";if(typeof a=="boolean")return a?"true":"false";if(typeof a=="string")return ve(a,h);if(typeof a=="number"){if(a===0)return 1/0/a>0?"0":"-0";var T=String(a);return L?ce(a,T):T}if(typeof a=="bigint"){var _=String(a)+"n";return L?ce(a,_):_}var ee=typeof h.depth>"u"?5:h.depth;if(typeof g>"u"&&(g=0),g>=ee&&ee>0&&typeof a=="object")return X(a)?"[Array]":"[Object]";var W=He(h,g);if(typeof w>"u")w=[];else if(he(w,a)>=0)return"[Circular]";function x(k,K,ze){if(K&&(w=Ae.call(w),w.push(K)),ze){var Te={depth:h.depth};return R(h,"quoteStyle")&&(Te.quoteStyle=h.quoteStyle),o(k,Te,g+1,w)}return o(k,h,g+1,w)}if(typeof a=="function"&&!de(a)){var we=Fe(a),Se=U(a,x);return"[Function"+(we?": "+we:" (anonymous)")+"]"+(Se.length>0?" { "+$.call(Se,", ")+" }":"")}if(me(a)){var be=D?E.call(String(a),/^(Symbol\(.*\))_[^)]*$/,"$1"):J.call(a);return typeof a=="object"&&!D?B(be):be}if(Me(a)){for(var M="<"+q.call(String(a.nodeName)),te=a.attributes||[],H=0;H<te.length;H++)M+=" "+te[H].name+"="+ye(xe(te[H].value),"double",h);return M+=">",a.childNodes&&a.childNodes.length&&(M+="..."),M+="</"+q.call(String(a.nodeName))+">",M}if(X(a)){if(a.length===0)return"[]";var re=U(a,x);return W&&!Ue(re)?"["+Z(re,W)+"]":"[ "+$.call(re,", ")+" ]"}if(qe(a)){var ne=U(a,x);return!("cause"in Error.prototype)&&"cause"in a&&!le.call(a,"cause")?"{ ["+String(a)+"] "+$.call(G.call("[cause]: "+x(a.cause),ne),", ")+" }":ne.length===0?"["+String(a)+"]":"{ ["+String(a)+"] "+$.call(ne,", ")+" }"}if(typeof a=="object"&&C){if(pe&&typeof a[pe]=="function"&&V)return V(a,{depth:ee-g});if(C!=="symbol"&&typeof a.inspect=="function")return a.inspect()}if(De(a)){var $e=[];return n&&n.call(a,function(k,K){$e.push(x(K,a,!0)+" => "+x(k,a))}),ge("Map",r.call(a),$e,W)}if(je(a)){var Ie=[];return s&&s.call(a,function(k){Ie.push(x(k,a))}),ge("Set",u.call(a),Ie,W)}if(We(a))return Q("WeakMap");if(Be(a))return Q("WeakSet");if(ke(a))return Q("WeakRef");if(Ne(a))return B(x(Number(a)));if(_e(a))return B(x(z.call(a)));if(Ce(a))return B(S.call(a));if(Re(a))return B(x(String(a)));if(!Oe(a)&&!de(a)){var ie=U(a,x),Ee=ue?ue(a)===Object.prototype:a instanceof Object||a.constructor===Object,oe=a instanceof Object?"":"null prototype",Pe=!Ee&&I&&Object(a)===a&&I in a?A.call(N(a),8,-1):oe?"Object":"",Ke=Ee||typeof a.constructor!="function"?"":a.constructor.name?a.constructor.name+" ":"",ae=Ke+(Pe||oe?"["+$.call(G.call([],Pe||[],oe||[]),": ")+"] ":"");return ie.length===0?ae+"{}":W?ae+"{"+Z(ie,W)+"}":ae+"{ "+$.call(ie,", ")+" }"}return String(a)};function ye(o,a,v){var g=(v.quoteStyle||a)==="double"?'"':"'";return g+o+g}function xe(o){return E.call(String(o),/"/g,"&quot;")}function X(o){return N(o)==="[object Array]"&&(!I||!(typeof o=="object"&&I in o))}function Oe(o){return N(o)==="[object Date]"&&(!I||!(typeof o=="object"&&I in o))}function de(o){return N(o)==="[object RegExp]"&&(!I||!(typeof o=="object"&&I in o))}function qe(o){return N(o)==="[object Error]"&&(!I||!(typeof o=="object"&&I in o))}function Re(o){return N(o)==="[object String]"&&(!I||!(typeof o=="object"&&I in o))}function Ne(o){return N(o)==="[object Number]"&&(!I||!(typeof o=="object"&&I in o))}function Ce(o){return N(o)==="[object Boolean]"&&(!I||!(typeof o=="object"&&I in o))}function me(o){if(D)return o&&typeof o=="object"&&o instanceof Symbol;if(typeof o=="symbol")return!0;if(!o||typeof o!="object"||!J)return!1;try{return J.call(o),!0}catch{}return!1}function _e(o){if(!o||typeof o!="object"||!z)return!1;try{return z.call(o),!0}catch{}return!1}var Le=Object.prototype.hasOwnProperty||function(o){return o in this};function R(o,a){return Le.call(o,a)}function N(o){return P.call(o)}function Fe(o){if(o.name)return o.name;var a=j.call(O.call(o),/^function\s*([\w$]+)/);return a?a[1]:null}function he(o,a){if(o.indexOf)return o.indexOf(a);for(var v=0,g=o.length;v<g;v++)if(o[v]===a)return v;return-1}function De(o){if(!r||!o||typeof o!="object")return!1;try{r.call(o);try{u.call(o)}catch{return!0}return o instanceof Map}catch{}return!1}function We(o){if(!f||!o||typeof o!="object")return!1;try{f.call(o,f);try{y.call(o,y)}catch{return!0}return o instanceof WeakMap}catch{}return!1}function ke(o){if(!m||!o||typeof o!="object")return!1;try{return m.call(o),!0}catch{}return!1}function je(o){if(!u||!o||typeof o!="object")return!1;try{u.call(o);try{r.call(o)}catch{return!0}return o instanceof Set}catch{}return!1}function Be(o){if(!y||!o||typeof o!="object")return!1;try{y.call(o,y);try{f.call(o,f)}catch{return!0}return o instanceof WeakSet}catch{}return!1}function Me(o){return!o||typeof o!="object"?!1:typeof HTMLElement<"u"&&o instanceof HTMLElement?!0:typeof o.nodeName=="string"&&typeof o.getAttribute=="function"}function ve(o,a){if(o.length>a.maxStringLength){var v=o.length-a.maxStringLength,g="... "+v+" more character"+(v>1?"s":"");return ve(A.call(o,0,a.maxStringLength),a)+g}var w=E.call(E.call(o,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ge);return ye(w,"single",a)}function Ge(o){var a=o.charCodeAt(0),v={8:"b",9:"t",10:"n",12:"f",13:"r"}[a];return v?"\\"+v:"\\x"+(a<16?"0":"")+b.call(a.toString(16))}function B(o){return"Object("+o+")"}function Q(o){return o+" { ? }"}function ge(o,a,v,g){var w=g?Z(v,g):$.call(v,", ");return o+" ("+a+") {"+w+"}"}function Ue(o){for(var a=0;a<o.length;a++)if(he(o[a],`
`)>=0)return!1;return!0}function He(o,a){var v;if(o.indent==="	")v="	";else if(typeof o.indent=="number"&&o.indent>0)v=$.call(Array(o.indent+1)," ");else return null;return{base:v,prev:$.call(Array(a+1),v)}}function Z(o,a){if(o.length===0)return"";var v=`
`+a.prev+a.base;return v+$.call(o,","+v)+`
`+a.prev}function U(o,a){var v=X(o),g=[];if(v){g.length=o.length;for(var w=0;w<o.length;w++)g[w]=R(o,w)?a(o[w],o):""}var h=typeof Y=="function"?Y(o):[],C;if(D){C={};for(var L=0;L<h.length;L++)C["$"+h[L]]=h[L]}for(var T in o)R(o,T)&&(v&&String(Number(T))===T&&T<o.length||D&&C["$"+T]instanceof Symbol||(F.call(/[^\w$]/,T)?g.push(a(T,o)+": "+a(o[T],o)):g.push(T+": "+a(o[T],o))));if(typeof Y=="function")for(var _=0;_<h.length;_++)le.call(o,h[_])&&g.push("["+a(h[_])+"]: "+a(o[h[_]],o));return g}return objectInspect}var IsPropertyKey$1,hasRequiredIsPropertyKey;function requireIsPropertyKey(){return hasRequiredIsPropertyKey||(hasRequiredIsPropertyKey=1,IsPropertyKey$1=function(e){return typeof e=="string"||typeof e=="symbol"}),IsPropertyKey$1}var Type$3,hasRequiredType$1;function requireType$1(){return hasRequiredType$1||(hasRequiredType$1=1,Type$3=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}),Type$3}var Type$2,hasRequiredType;function requireType(){if(hasRequiredType)return Type$2;hasRequiredType=1;var t=requireType$1();return Type$2=function(r){return typeof r=="symbol"?"Symbol":typeof r=="bigint"?"BigInt":t(r)},Type$2}var GetIntrinsic$3=getIntrinsic,$TypeError$3=GetIntrinsic$3("%TypeError%"),inspect=requireObjectInspect(),IsPropertyKey=requireIsPropertyKey(),Type$1=requireType(),Get$2=function(e,r){if(Type$1(e)!=="Object")throw new $TypeError$3("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(r))throw new $TypeError$3("Assertion failed: IsPropertyKey(P) is not true, got "+inspect(r));return e[r]},IsCallableExports={},IsCallable$1={get exports(){return IsCallableExports},set exports(t){IsCallableExports=t}},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(t){t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var r=fnToStr.call(e);return constructorRegex.test(r)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch{return!1}},toStr=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr.call(all)===toStr.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=toStr.call(e);return(r===ddaClass||r===ddaClass2||r===ddaClass3||r===objectClass)&&e("")==null}catch{}return!1})}var isCallable=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(r){if(r!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var r=toStr.call(e);return r!==fnClass&&r!==genClass&&!/^\[object HTML/.test(r)?!1:tryFunctionObject(e)};(function(t){t.exports=isCallable})(IsCallable$1);var maxSafeInteger,hasRequiredMaxSafeInteger;function requireMaxSafeInteger(){if(hasRequiredMaxSafeInteger)return maxSafeInteger;hasRequiredMaxSafeInteger=1;var t=getIntrinsic,e=t("%Math%"),r=t("%Number%");return maxSafeInteger=r.MAX_SAFE_INTEGER||e.pow(2,53)-1,maxSafeInteger}var abs,hasRequiredAbs;function requireAbs(){if(hasRequiredAbs)return abs;hasRequiredAbs=1;var t=getIntrinsic,e=t("%Math.abs%");return abs=function(n){return e(n)},abs}var floor,hasRequiredFloor;function requireFloor(){if(hasRequiredFloor)return floor;hasRequiredFloor=1;var t=requireType(),e=Math.floor;return floor=function(n){return t(n)==="BigInt"?n:e(n)},floor}var isPrimitive$1,hasRequiredIsPrimitive$1;function requireIsPrimitive$1(){return hasRequiredIsPrimitive$1||(hasRequiredIsPrimitive$1=1,isPrimitive$1=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),isPrimitive$1}var isPrimitive,hasRequiredIsPrimitive;function requireIsPrimitive(){return hasRequiredIsPrimitive||(hasRequiredIsPrimitive=1,isPrimitive=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),isPrimitive}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=shams$1;return shams=function(){return t()&&!!Symbol.toStringTag},shams}var isDateObject,hasRequiredIsDateObject;function requireIsDateObject(){if(hasRequiredIsDateObject)return isDateObject;hasRequiredIsDateObject=1;var t=Date.prototype.getDay,e=function(u){try{return t.call(u),!0}catch{return!1}},r=Object.prototype.toString,n="[object Date]",i=requireShams()();return isDateObject=function(u){return typeof u!="object"||u===null?!1:i?e(u):r.call(u)===n},isDateObject}var isSymbolExports={},isSymbol={get exports(){return isSymbolExports},set exports(t){isSymbolExports=t}},hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbolExports;hasRequiredIsSymbol=1;var t=Object.prototype.toString,e=hasSymbols$2();if(e){var r=Symbol.prototype.toString,n=/^Symbol\(.*\)$/,i=function(u){return typeof u.valueOf()!="symbol"?!1:n.test(r.call(u))};isSymbol.exports=function(u){if(typeof u=="symbol")return!0;if(t.call(u)!=="[object Symbol]")return!1;try{return i(u)}catch{return!1}}}else isSymbol.exports=function(u){return!1};return isSymbolExports}var es2015,hasRequiredEs2015;function requireEs2015(){if(hasRequiredEs2015)return es2015;hasRequiredEs2015=1;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",e=requireIsPrimitive(),r=isCallable,n=requireIsDateObject(),i=requireIsSymbol(),l=function(c,f){if(typeof c>"u"||c===null)throw new TypeError("Cannot call method on "+c);if(typeof f!="string"||f!=="number"&&f!=="string")throw new TypeError('hint must be "string" or "number"');var p=f==="string"?["toString","valueOf"]:["valueOf","toString"],y,d,m;for(m=0;m<p.length;++m)if(y=c[p[m]],r(y)&&(d=y.call(c),e(d)))return d;throw new TypeError("No default value")},u=function(c,f){var p=c[f];if(p!==null&&typeof p<"u"){if(!r(p))throw new TypeError(p+" returned for property "+f+" of object "+c+" is not a function");return p}};return es2015=function(c){if(e(c))return c;var f="default";arguments.length>1&&(arguments[1]===String?f="string":arguments[1]===Number&&(f="number"));var p;if(t&&(Symbol.toPrimitive?p=u(c,Symbol.toPrimitive):i(c)&&(p=Symbol.prototype.valueOf)),typeof p<"u"){var y=p.call(c,f);if(e(y))return y;throw new TypeError("unable to convert exotic object to primitive")}return f==="default"&&(n(c)||i(c))&&(f="string"),l(c,f==="default"?"number":f)},es2015}var ToPrimitive,hasRequiredToPrimitive;function requireToPrimitive(){if(hasRequiredToPrimitive)return ToPrimitive;hasRequiredToPrimitive=1;var t=requireEs2015();return ToPrimitive=function(r){return arguments.length>1?t(r,arguments[1]):t(r)},ToPrimitive}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var t=callBound$2,e=requireShams()(),r,n,i,l;if(e){r=t("Object.prototype.hasOwnProperty"),n=t("RegExp.prototype.exec"),i={};var u=function(){throw i};l={toString:u,valueOf:u},typeof Symbol.toPrimitive=="symbol"&&(l[Symbol.toPrimitive]=u)}var s=t("Object.prototype.toString"),c=Object.getOwnPropertyDescriptor,f="[object RegExp]";return isRegex=e?function(y){if(!y||typeof y!="object")return!1;var d=c(y,"lastIndex"),m=d&&r(d,"value");if(!m)return!1;try{n(y,l)}catch(S){return S===i}}:function(y){return!y||typeof y!="object"&&typeof y!="function"?!1:s(y)===f},isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var t=callBound$2,e=getIntrinsic,r=requireIsRegex(),n=t("RegExp.prototype.exec"),i=e("%TypeError%");return safeRegexTest=function(u){if(!r(u))throw new i("`regex` must be a RegExp");return function(c){return n(u,c)!==null}},safeRegexTest}var StringToNumber,hasRequiredStringToNumber;function requireStringToNumber(){if(hasRequiredStringToNumber)return StringToNumber;hasRequiredStringToNumber=1;var t=getIntrinsic,e=t("%Number%"),r=t("%RegExp%"),n=t("%TypeError%"),i=t("%parseInt%"),l=callBound$2,u=requireSafeRegexTest(),s=l("String.prototype.slice"),c=u(/^0b[01]+$/i),f=u(/^0o[0-7]+$/i),p=u(/^[-+]0x[0-9a-f]+$/i),y=["","​","￾"].join(""),d=new r("["+y+"]","g"),m=u(d),S=[`	
\v\f\r   ᠎    `,"         　\u2028","\u2029\uFEFF"].join(""),P=new RegExp("(^["+S+"]+)|(["+S+"]+$)","g"),O=l("String.prototype.replace"),j=function(E){return O(E,P,"")},A=requireType();return StringToNumber=function E(b){if(A(b)!=="String")throw new n("Assertion failed: `argument` is not a String");if(c(b))return e(i(s(b,2),2));if(f(b))return e(i(s(b,2),8));if(m(b)||p(b))return NaN;var q=j(b);return q!==b?E(q):e(b)},StringToNumber}var ToNumber,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return ToNumber;hasRequiredToNumber=1;var t=getIntrinsic,e=t("%TypeError%"),r=t("%Number%"),n=requireIsPrimitive$1(),i=requireToPrimitive(),l=requireStringToNumber();return ToNumber=function(s){var c=n(s)?s:i(s,r);if(typeof c=="symbol")throw new e("Cannot convert a Symbol value to a number");if(typeof c=="bigint")throw new e("Conversion from 'BigInt' to 'number' is not allowed.");return typeof c=="string"?l(c):r(c)},ToNumber}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var _isFinite,hasRequired_isFinite;function require_isFinite(){if(hasRequired_isFinite)return _isFinite;hasRequired_isFinite=1;var t=require_isNaN();return _isFinite=function(e){return(typeof e=="number"||typeof e=="bigint")&&!t(e)&&e!==1/0&&e!==-1/0},_isFinite}var sign,hasRequiredSign;function requireSign(){return hasRequiredSign||(hasRequiredSign=1,sign=function(e){return e>=0?1:-1}),sign}var ToIntegerOrInfinity,hasRequiredToIntegerOrInfinity;function requireToIntegerOrInfinity(){if(hasRequiredToIntegerOrInfinity)return ToIntegerOrInfinity;hasRequiredToIntegerOrInfinity=1;var t=requireAbs(),e=requireFloor(),r=requireToNumber(),n=require_isNaN(),i=require_isFinite(),l=requireSign();return ToIntegerOrInfinity=function(s){var c=r(s);if(n(c)||c===0)return 0;if(!i(c))return c;var f=e(t(c));return f===0?0:l(c)*f},ToIntegerOrInfinity}var ToLength$1,hasRequiredToLength;function requireToLength(){if(hasRequiredToLength)return ToLength$1;hasRequiredToLength=1;var t=requireMaxSafeInteger(),e=requireToIntegerOrInfinity();return ToLength$1=function(n){var i=e(n);return i<=0?0:i>t?t:i},ToLength$1}var GetIntrinsic$2=getIntrinsic,$TypeError$2=GetIntrinsic$2("%TypeError%"),Get$1=Get$2,ToLength=requireToLength(),Type=requireType(),LengthOfArrayLike$1=function(e){if(Type(e)!=="Object")throw new $TypeError$2("Assertion failed: `obj` must be an Object");return ToLength(Get$1(e,"length"))},ToBoolean$1=function(e){return!!e},GetIntrinsic$1=getIntrinsic,$Object=GetIntrinsic$1("%Object%"),RequireObjectCoercible$1=RequireObjectCoercibleExports,ToObject$1=function(e){return RequireObjectCoercible$1(e),$Object(e)},GetIntrinsic=getIntrinsic,$String=GetIntrinsic("%String%"),$TypeError$1=GetIntrinsic("%TypeError%"),ToString$1=function(e){if(typeof e=="symbol")throw new $TypeError$1("Cannot convert a Symbol value to a string");return $String(e)},Call=Call$1,Get=Get$2,IsCallable=IsCallableExports,LengthOfArrayLike=LengthOfArrayLike$1,ToBoolean=ToBoolean$1,ToObject=ToObject$1,ToString=ToString$1,implementation$2=function(e){var r=ToObject(this),n=LengthOfArrayLike(r);if(!IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:void 0,l=0;l<n;){var u=ToString(l),s=Get(r,u),c=ToBoolean(Call(e,i,[s,l,r]));if(c)return l;l+=1}return-1},implementation$1=implementation$2,polyfill$1=function(){var e=Array.prototype.findIndex&&[,1].findIndex(function(r,n){return n===0})===0;return e?Array.prototype.findIndex:implementation$1},has=src$1,hasUnscopables=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",map=hasUnscopables&&Array.prototype[Symbol.unscopables],$TypeError=TypeError,esShimUnscopables=function(e){if(typeof e!="string"||!e)throw new $TypeError("method must be a non-empty string");if(!has(Array.prototype,e))throw new $TypeError("method must be on Array.prototype");hasUnscopables&&(map[e]=!0)},define$1=defineProperties_1,shimUnscopables=esShimUnscopables,getPolyfill$1=polyfill$1,shim$1=function(){var e=getPolyfill$1();return define$1(Array.prototype,{findIndex:e},{findIndex:function(){return Array.prototype.findIndex!==e}}),shimUnscopables("findIndex"),e},define=defineProperties_1,RequireObjectCoercible=RequireObjectCoercibleExports,callBind=callBindExports,callBound=callBound$2,implementation=implementation$2,getPolyfill=polyfill$1,shim=shim$1,$slice=callBound("Array.prototype.slice"),polyfill=callBind.apply(getPolyfill()),boundShim=function(e,r){RequireObjectCoercible(e);var n=$slice(arguments,1);return polyfill(e,n)};define(boundShim,{getPolyfill,implementation,shim});/*! http://mths.be/startswith v0.2.0 by @mathias */String.prototype.startsWith||function(){var t=function(){try{var n={},i=Object.defineProperty,l=i(n,n,n)&&i}catch{}return l}(),e={}.toString,r=function(n){if(this==null)throw TypeError();var i=String(this);if(n&&e.call(n)=="[object RegExp]")throw TypeError();var l=i.length,u=String(n),s=u.length,c=arguments.length>1?arguments[1]:void 0,f=c?Number(c):0;f!=f&&(f=0);var p=Math.min(Math.max(f,0),l);if(s+p>l)return!1;for(var y=-1;++y<s;)if(i.charCodeAt(p+y)!=u.charCodeAt(y))return!1;return!0};t?t(String.prototype,"startsWith",{value:r,configurable:!0,writable:!0}):String.prototype.startsWith=r}();/*! https://mths.be/includes v0.2.0 by @mathias */String.prototype.includes||function(){var t={}.toString,e=function(){try{var i={},l=Object.defineProperty,u=l(i,i,i)&&l}catch{}return u}(),r="".indexOf,n=function(i){if(this==null)throw TypeError();var l=String(this);if(i&&t.call(i)=="[object RegExp]")throw TypeError();var u=l.length,s=String(i),c=s.length,f=arguments.length>1?arguments[1]:void 0,p=f?Number(f):0;p!=p&&(p=0);var y=Math.min(Math.max(p,0),u);return c+y>u?!1:r.call(l,s,p)!=-1};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}();/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var t=function(){try{var r={},n=Object.defineProperty,i=n(r,r,r)&&n}catch{}return i}(),e=function(r){if(this==null)throw TypeError();var n=String(this),i=r?Number(r):0;if(i!=i&&(i=0),i<0||i==1/0)throw RangeError();for(var l="";i;)i%2==1&&(l+=n),i>1&&(n+=n),i>>=1;return l};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}();function addLineNumbers$2(t,e){return e.map(function(r,n){var i=n+1,l=i.toString().length,u=" ".repeat(t-l);return u+i+"  "+r})}var lineNumber=addLineNumbers$2,addLineNumbers$1=lineNumber,numColumnWidth$1=6,numberFlag="-n";function cat(t,e){var r=0,n=e.findIndex(function(l){return l===numberFlag}),i=n!==-1;i&&e.splice(n,1),Promise.all(e.map(function(l){return t.system.read(l).then(null,function(u){return r=1,"cat: "+u})})).then(function(l){return i?addLineNumbers$1(numColumnWidth$1,l):l}).then(function(l){t.output(l.join(`
`)),t.exit(r)})}var cat_1=cat;function cd(t,e){var r=e[0]||"/home/"+t.system.state.user;t.system.changeDir(r).then(t.exit,function(n){t.error(n),t.exit(1)})}var cd_1=cd,SINGLE_COPY$1="SINGLE_COPY";function cp(t,e){var r=e.findIndex(function(s){return s==="-r"||s==="-R"}),n=r!==-1;if(n&&e.splice(r,1),!e.length){t.error("cp: missing file operand"),t.exit(1);return}if(e.length===1){t.error("cp: missing destination file operand after ‘"+e[0]+"’"),t.exit(1);return}var i=e[e.length-1],l=e.slice(0,-1);function u(s,c){return t.system.stat(s).then(function(f){return f.type==="dir"&&!n?Promise.reject("cp: omitting directory ‘"+s+"’"):t.system.copy(s,c)})}t.system.stat(i).then(function(s){if(s.type!=="dir")return Promise.reject()}).catch(function(){return l.length!==1?Promise.reject("cp: target ‘"+i+"’ is not a directory"):SINGLE_COPY$1}).then(function(s){return s===SINGLE_COPY$1?u(l[0],i):Promise.all(l.map(function(c){var f=c.split("/"),p=f[f.length-1],y=i+"/"+p;return u(c,y)}))}).then(function(){t.exit(0)}).catch(function(s){t.error(s),t.exit(1)})}var cp_1=cp,addLineNumbers=lineNumber,numColumnWidth=5;function history(t){t.system.getHistory().then(function(e){t.output(addLineNumbers(numColumnWidth,e).join(`
`)),t.exit()})}var history_1=history,disclaimer=`
The output here is limited.
On a real system you would also see file permissions, user, group, block size and more.`;function ls(t,e){var r=e.findIndex(function(p){return p==="-a"}),n=r!==-1;n&&e.splice(r,1);var i=e.findIndex(function(p){return p==="-l"}),l=i!==-1;l&&e.splice(i,1);var u=e.findIndex(function(p){return p==="-la"});u!==-1&&(n=!0,l=!0,e.splice(u,1));var s=e.findIndex(function(p){return p==="-al"});s!==-1&&(n=!0,l=!0,e.splice(s,1)),e.length||e.push(".");function c(p){return n?p:p.filter(function(y){return y[0]!=="."})}function f(p,y){return l?Promise.all(y.map(function(d){return t.system.stat(p+"/"+d).then(function(m){var S=new Date(m.modified),P=S.toDateString().slice(4,10)+" "+S.toTimeString().slice(0,5),O=m.type;return O==="dir"&&(O+=" "),O+"  "+P+"  "+m.name})})).then(function(d){return"total "+d.length+`
`+d.join(`
`)+disclaimer}):Promise.resolve(y.join(" "))}Promise.all(e.sort().map(function(p){return t.system.readDir(p).then(c).then(function(y){return f(p,y)}).then(function(y){return e.length===1?y:p+`:
`+y})})).then(function(p){return p.join(`

`)}).then(function(p){t.output(p),t.exit()},function(p){t.output("ls: "+p),t.exit(2)})}var ls_1=ls;function mkdir(t,e){if(!e.length){t.error("mkdir: missing operand"),t.exit(1);return}Promise.all(e.map(function(r){return t.system.createDir(r)})).then(function(){t.exit()},function(r){t.error(r),t.exit(1)})}var mkdir_1=mkdir,SINGLE_COPY="SINGLE_COPY";function mv(t,e){var r=e.findIndex(function(s){return s==="-n"}),n=r!==-1;if(n&&e.splice(r,1),!e.length){t.error("mv: missing file operand"),t.exit(1);return}if(e.length===1){t.error("mv: missing destination file operand after ‘"+e[0]+"’"),t.exit(1);return}var i=e[e.length-1],l=e.slice(0,-1);function u(s,c){return n?t.system.stat(c).catch(function(){return t.system.copy(s,c).then(function(){return t.system.remove(s)})}):t.system.copy(s,c).then(function(){return t.system.remove(s)})}t.system.stat(i).then(function(s){if(s.type!=="dir")return Promise.reject()}).catch(function(){return l.length!==1?Promise.reject("mv: target ‘"+i+"’ is not a directory"):SINGLE_COPY}).then(function(s){return s===SINGLE_COPY?u(l[0],i):Promise.all(l.map(function(c){var f=c.split("/"),p=f[f.length-1],y=i+"/"+p;return u(c,y)}))}).then(function(){t.exit(0)}).catch(function(s){t.error(s),t.exit(1)})}var mv_1=mv;function pwd(t,e){t.system.getDir().then(function(r){t.output(r),t.exit()})}var pwd_1=pwd;function rm(t,e){var r=e.findIndex(function(i){return i.toLowerCase()==="-r"}),n=r!==-1;if(n&&e.splice(r,1),!e.length){t.error("rm: missing operand"),t.exit(1);return}Promise.all(e.map(function(i){return t.system.stat(i).then(function(l){var u=l.type==="dir";if(u&&!n)return Promise.reject("rm: cannot remove ‘"+i+"’: Is a directory")},function(){}).then(function(){return t.system.remove(i)})})).then(function(){t.exit()},function(i){t.error(i),t.exit(1)})}var rm_1=rm;function rmdir(t,e){if(!e.length){t.error("rmdir: missing operand"),t.exit(1);return}Promise.all(e.map(function(r){return t.system.stat(r).then(function(n){if(n.type!=="dir")return Promise.reject("rmdir: cannot remove ‘"+r+"’: Not a directory")},function(){}).then(function(){return t.system.readDir(r)}).then(function(n){if(n.length)return Promise.reject("rmdir: failed to remove ‘"+r+"’: Directory not empty")}).then(function(){return t.system.remove(r)})})).then(function(){t.exit()},function(r){t.error(r),t.exit(1)})}var rmdir_1=rmdir;function touch(t,e){if(!e.length){t.error("touch: missing file operand"),t.exit(1);return}Promise.all(e.map(function(r){return t.system.write(r,"")})).then(function(){t.exit()},function(r){t.error(r),t.exit(1)})}var touch_1=touch,commands$1={cat:cat_1,cd:cd_1,cp:cp_1,history:history_1,ls:ls_1,mkdir:mkdir_1,mv:mv_1,pwd:pwd_1,rm:rm_1,rmdir:rmdir_1,touch:touch_1},commands_1=commands$1,commands=commands_1;function bashEmulator(t){var e=createState(t),r={};function n(u){return joinPaths(e.workingDirectory,u)}function i(u){var s=n(u).split("/").slice(0,-1).join("/");return l.stat(s).then(function(c){return c.type==="dir"?Promise.resolve():Promise.reject(s+": Is not a directory")})}var l={commands,state:e,run:function(u){var s=u.split(" "),c=s.shift();if(e.history.push(u),!commands[c])return Promise.reject(c+": command not found");var f="";return new Promise(function(p,y){commands[c]({output:function(d){f+=d},error:function(d){f+=d},exit:function(d){d?y(f):p(f)},system:l},s)})},getDir:function(){return Promise.resolve(e.workingDirectory)},changeDir:function(u){var s=n(u);return e.fileSystem[s]?(e.workingDirectory=s,Promise.resolve()):Promise.reject(s+": No such file or directory")},read:function(u){var s=n(u);return e.fileSystem[s]?e.fileSystem[s].type!=="file"?Promise.reject(u+": Is a directory"):Promise.resolve(e.fileSystem[s].content):Promise.reject(u+": No such file or directory")},readDir:function(u){var s=n(u);if(!e.fileSystem[s])return Promise.reject("cannot access ‘"+u+"’: No such file or directory");var c=Object.keys(e.fileSystem).filter(function(f){return f.startsWith(s)&&f!==s}).map(function(f){return f.substr(s==="/"?s.length:s.length+1)}).filter(function(f){return!f.includes("/")}).sort();return Promise.resolve(c)},stat:function(u){var s=n(u);if(!e.fileSystem[s])return Promise.reject(u+": No such file or directory");var c=s.split("/");return Promise.resolve({modified:e.fileSystem[s].modified,type:e.fileSystem[s].type,name:c[c.length-1]})},createDir:function(u){return l.stat(u).then(function(){return Promise.reject("cannot create directory '"+u+"': File exists")},function(){return i(u)}).then(function(){var s=n(u);e.fileSystem[s]={type:"dir",modified:Date.now()}})},write:function(u,s){if(typeof s!="string")try{s=JSON.stringify(s)}catch(c){return Promise.reject(c)}return i(u).then(function(){var c=n(u);return l.stat(u).then(function(f){if(f.type!=="file")return Promise.reject(c+": Is a folder");var p=e.fileSystem[c].content;e.fileSystem[c].content=p+s,e.fileSystem[c].modified=Date.now()},function(){e.fileSystem[c]={type:"file",modified:Date.now(),content:s}})})},remove:function(u){var s=n(u);return e.fileSystem[s]?(Object.keys(e.fileSystem).forEach(function(c){c.startsWith(s)&&delete e.fileSystem[c]}),Promise.resolve()):Promise.reject("cannot remove ‘"+u+"’: No such file or directory")},copy:function(u,s){var c=n(u),f=n(s);if(!e.fileSystem[c])return Promise.reject(u+": No such file or directory");function p(y){if(y.startsWith(c)){var d=y.replace(c,f);e.fileSystem[d]=e.fileSystem[y]}}return i(f).then(function(){Object.keys(e.fileSystem).forEach(p)})},getHistory:function(){return Promise.resolve(e.history)},completeUp:function(u){var s=r.historySize!==e.history.length,c=u!==r.input;if(c||s)r.input=u,r.index=0,r.historySize=e.history.length,r.list=e.history.filter(function(f){return f.startsWith(u)}).reverse();else if(r.index<r.list.length-1)r.index++;else return Promise.resolve(void 0);return Promise.resolve(r.list[r.index])},completeDown:function(u){return u!==r.input||!r.index?Promise.resolve(void 0):(r.index--,Promise.resolve(r.list[r.index]))}};return l}function createState(t){var e=defaultState();return t&&Object.keys(e).forEach(function(r){t[r]&&(e[r]=t[r])}),e}function defaultState(){return{history:[],fileSystem:{"/":{type:"dir",modified:Date.now()},"/home":{type:"dir",modified:Date.now()},"/home/user":{type:"dir",modified:Date.now()}},user:"user",workingDirectory:"/home/user"}}function joinPaths(t,e){if(!e)return t;for(var r=(e.charAt(0)==="/"?"":t+"/")+e,n=r.split("/").filter(function(c){return!!c}),i=0,l=n.length-1;l>=0;l--){var u=n[l];u==="."?n.splice(l,1):u===".."?(n.splice(l,1),i++):i&&(n.splice(l,1),i--)}return"/"+n.join("/")}var src=bashEmulator;const getEmulator=()=>{let t;if(!localStorage.bashEmulator)t=src({workingDirectory:"/",fileSystem:{"/":{type:"dir",modified:Date.now()},"/welcome.html":{type:"file",content:`<style>*{margin:0;padding:0;box-sizing:border-box; background: black; color: green;}</style><div style="display: flex; gap: 1em;flex-flow: column; justify-content: center; align-items:center; height:100%">
<h1>Happy hacking :)</h1><h4>Don't know where to start? <br>Start with typing "commands" in terminal</h4></div>`,modified:Date.now()},"/autostart.js":{type:"file",content:`
let windowManager = document.querySelector('window-manager')
let iframewindow = windowManager.createNewWindow(IFrameWindow.new("welcome.html"))
windowManager.createNewWindow(CodeEditor.new("autostart.js"))
windowManager.moveSelectedWindowHorizontally(-1);
windowManager.createNewWindow(CodeEditor.new("welcome.html"))
`}}});else{var e=JSON.parse(localStorage.bashEmulator||"{}");t=src(e)}return t},emulator=getEmulator();emulator.commands.commands=t=>{t.output(`Available commands:
`),t.output(Object.keys(emulator.commands).join(`
`)),t.exit()};emulator.commands.clear=(t,e)=>{t.output("pleaseclear"),t.exit()};emulator.commands.exit=(t,e)=>{t.output("exitnowplease"),t.exit()};emulator.commands.edit=(t,e)=>{if(e.join("").trim().length==0){t.error("No file to open"),t.exit(-1);return}document.querySelector("window-manager").createNewWindow(CodeEditor.new(e[0])),t.exit()};emulator.commands.iframe=(t,e)=>{if(e.join("").trim().length==0){t.error("No file to open"),t.exit(-1);return}document.querySelector("window-manager").createNewWindow(IFrameWindow.new(e[0])),t.exit()};emulator.commands.run=(env,args)=>{if(args.join("").trim().length==0){env.error("No file to open"),env.exit(-1);return}let file=args[0];emulator.read(file).then(data=>{let result=eval(data);console.log(result),env.exit()}).catch(t=>{env.error(t),env.exit(-1)})};emulator.commands.python=(env,args)=>{if(args.join("").trim().length==0){env.error("No file to open"),env.exit(-1);return}let file=args[0];emulator.read(file).then(data=>{let result=eval(data);console.log(result),env.exit()}).catch(t=>{env.error(t),env.exit(-1)})};function formatBytes(t,e){if(t==0)return"0 Bytes";var r=1024,n=e||2,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,l)).toFixed(n))+" "+i[l]}var storageLeft=()=>formatBytes(1024*1024*5-escape(encodeURIComponent(JSON.stringify(localStorage))).length,2);const saveState=()=>{localStorage.bashEmulator=JSON.stringify(emulator.state),document.querySelector(".status-indicator").innerText=`Storage left: ${storageLeft()}`};class TerminalEmulator extends CustomWindow{constructor(){super()}static new(e){let r=document.createElement("terminal-emulator");return console.log(r,e),r.connectedCallback(),e!=null?r.run(e):r.run("pwd"),r}set content(e){this._content=e,this.querySelector(".terminal-emulator-content")&&(this.querySelector(".terminal-emulator-content").innerText=e)}get content(){return this._content}error(e){e&&(this.content=this.content+e+`
`)}run(e){return this.log(`$ ${e}`),emulator.run(e).then(r=>{this.log(r)},r=>{this.error(r)}).then(saveState)}log(e){if(e=="pleaseclear"){this.content="";return}if(e=="exitnowplease"){this.removeWindow();return}e&&(this.content=this.content+e+`
`,this.querySelector(".terminal-emulator-content")&&(this.querySelector(".terminal-emulator-content").scrollTop=this.querySelector(".terminal-emulator-content").scrollHeight)),saveState()}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".terminal-emulator-input").focus()}basicStructure(){this.title="terminal emulator",this.content="",this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">    
        </div>
      </div>
      <div class="window-terminal-content">
        <p class='terminal-emulator-content' spellcheck='false'></p>
        <input type='text' class='terminal-emulator-input'></input>
      </div>
    `,this.terminal_emulator_content=this.querySelector(".terminal-emulator-content"),this.terminal_emulator_content.innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-title").innerHTML=this.title,this.terminal_emulator_input=this.querySelector(".terminal-emulator-input"),this.terminal_emulator_input.addEventListener("keydown",e=>{let r=this.terminal_emulator_input;e.key=="ArrowUp"&&(e.preventDefault(),emulator.getHistory().then(n=>{r.value=n[0]})),e.key=="ArrowDown"&&(e.preventDefault(),emulator.getHistory().then(n=>{r.value=n[2]})),e.key=="Enter"&&r.value.trim().length!=0&&(this.run(r.value),r.value="")})}}customElements.define("terminal-emulator",TerminalEmulator);class IFrameWindow extends CustomWindow{constructor(){super(),this.reloadEverytime=!0}static new(e){let r=document.createElement("iframe-window");return r.file=e,emulator.read(e).then(n=>{console.log(n),r.content=n}),r}get content(){return this._content==null?"":this._content}set content(e){this._content=e;let r=this.querySelector(".iframe-window-content");r!=null&&(r.contentWindow.document.open(),r.contentWindow.document.write(e),r.contentWindow.document.close())}set file(e){this._file=e}get file(){return this._file==null&&(this._file="new file"),this._file}basicStructure(){this.title=`iframe - ${this.file}`,this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">          
          <i class="ti ti-refresh window-refresh-button window-button"></i>         
          <i class="ti ti-download window-download-button window-button"></i>     
        </div>
      </div>
      <div class="window-content">
        <iframe wrap='off' class='iframe-window-content' spellcheck='false'></iframe>
      </div>
    `,this.content=this.content,this.classList.add("window-container"),this.querySelector(".window-download-button").addEventListener("click",()=>{function e(r,n){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(n)),i.setAttribute("download",r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}emulator.read(this.file).then(r=>e(this.file,r))}),this.querySelector(".window-refresh-button").addEventListener("click",()=>{emulator.read(this.file).then(e=>{console.log(e),this.content=e,this.connectedCallback()})}),this.querySelector(".window-title").innerHTML=this.title,this.addEventListener("mouseover",()=>{this.customFocus()})}}customElements.define("iframe-window",IFrameWindow);class WindowManager extends HTMLElement{constructor(){super()}get windowColumns(){return this.querySelectorAll(".window-column")}get allWindows(){return this.querySelectorAll(".window-container")}get selectedWindow(){return this._selectedWindow==null?(this._selectedWindow=this.querySelector(".window-container"),this._selectedWindow):this._selectedWindow}set selectedWindow(e){this.selectedWindow.classList.remove("selected-window"),this._selectedWindow=e,this._selectedWindow!=null&&(this._selectedWindow!=e&&this._selectedWindow.customFocus(),e.classList.add("selected-window"))}createNewColumn(e){let r=document.createElement("window-column");return r.classList.add("window-column"),e>0?this.appendChild(r):this.prepend(r),r}moveSelectedWindowHorizontally(e){let r=this.selectedWindow.parentElement,n=Array.from(this.children),i=n.indexOf(r)+e,l=i<0||i>n.length-1;if(r.children.length>1)l?this.createNewColumn(e).appendChild(this.selectedWindow):n[i].appendChild(this.selectedWindow);else if(!l){let s=n[i];this.selectedWindow.parentElement.remove(),s.appendChild(this.selectedWindow)}}moveSelectedWindowVertically(e){}selectWindowInColumn(e){let r=this.selectedWindow.parentElement,n=Array.from(r.children),i=n.indexOf(this.selectedWindow)+e;i<0&&(i=n.length+e),i>n.length-1&&(i=0),this.selectedWindow=n[i]}selectWindowInRow(e){let r=this.selectedWindow.parentElement,n=Array.from(this.children),i=n.indexOf(r)+e;i<0&&(i=n.length+e),i>n.length-1&&(i=0);let l=n[i].children[0];this.selectedWindow=l}createNewWindow(e){let r=e;return this.querySelector("window-column")||this.appendChild(document.createElement("window-column")),this.querySelector("window-column").appendChild(r),this.selectedWindow=r,r}connectedCallback(){this.createNewWindow(TerminalEmulator.new("run autostart.js")),document.addEventListener("keydown",e=>{if(console.log(e.key,e.shiftKey,e.altKey),e.key=="ArrowDown"&&e.shiftKey&&e.altKey){this.moveSelectedWindowVertically(1);return}if(e.key=="ArrowDown"&&e.altKey){this.selectWindowInColumn(1);return}if(e.key=="ArrowUp"&&e.shiftKey){this.moveSelectedWindowVertically(-1);return}if(e.key=="ArrowUp"&&e.ctrlKey){this.selectWindowInColumn(-1);return}if(e.key=="ArrowLeft"&&e.shiftKey){e.preventDefault(),this.moveSelectedWindowHorizontally(-1);return}if(e.key=="ArrowLeft"&&e.altKey){e.preventDefault(),this.selectWindowInRow(-1);return}if(e.key=="ArrowRight"&&e.shiftKey){e.preventDefault(),this.moveSelectedWindowHorizontally(1);return}if(e.key=="ArrowRight"&&e.altKey){e.preventDefault(),this.selectWindowInRow(1);return}if(e.key=="Enter"&&e.altKey){this.createNewWindow(TerminalEmulator.new());return}if(e.key=="Q"&&e.altKey){this.selectedWindow.removeWindow(),this.selectedWindow=this.querySelector(".window-container");return}})}}customElements.define("window-manager",WindowManager);document.querySelector("#app").innerHTML=`
  <main>
    <status-bar>
      <div class="branding-container">
        <img src="./src/img/monkey.svg" class="brand-logo">
        <p>aesthetic programming environment</p>
      </div>
      <status-indicator class="status-indicator">
        <i class="ti ti-database"></i>
        <p>1kB/10mB</p>
      </status-indicator>
    </status-bar>
    <window-manager>

    </window-manager>
  </main>
`;
