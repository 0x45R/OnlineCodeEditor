(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();const o=[],i=[];document.addEventListener("keydown",l=>{o.includes(l.key)||o.push(l.key)});document.addEventListener("keyup",l=>{o.pop(l.key)});const c={programming:{title:"<i></i> Code editor",content:"<custom-text-editor></custom-text-editor>"}};class u extends HTMLElement{constructor(){super()}parseTextEditor(t){let s=t.target.value.split(`
`).length,e=this.querySelector(".custom-text-editor-columns");e.innerHTML="";for(let r=1;r<s+1;r++){let d=document.createElement("p");d.innerText=r,e.appendChild(d)}}connectedCallback(){this.innerHTML="<div class='custom-text-editor-columns'>1</div><textarea wrap='off' class='custom-text-editor' spellcheck='false'></textarea>",this.querySelector(".custom-text-editor").addEventListener("input",t=>{this.parseTextEditor(t)})}}class w extends HTMLElement{constructor(){super(),this.innerHTML='<window-column class="window-column"></window-column>',this.lastKeypress=Date.now()}get windowColumns(){return this.querySelectorAll(".window-column")}get selectedWindow(){return this._selectedWindow==null?this.querySelector("custom-window"):this._selectedWindow}set selectedWindow(t){this.selectedWindow.classList.remove("selected-window"),this._selectedWindow=t,t.classList.add("selected-window")}createNewColumn(t){let n=document.createElement("window-column");return n.classList.add("window-column"),t>0?this.appendChild(n):this.prepend(n),n}moveWindowHorizontally(t){let n=this.selectedWindow.parentElement,s=Array.from(this.children),e=s.indexOf(n)+t;if((e<0||e>s.length-1)&&n.children.length>1)this.createNewColumn(t).appendChild(this.selectedWindow);else if(n.children.length>1)s[e].appendChild(this.selectedWindow);else if(!(e<0||e>s.length-1)){let r=s[e];this.selectedWindow.parentElement.remove(),r.appendChild(this.selectedWindow)}}moveSelectedWindowInsideColumn(t){let n=this.selectedWindow.parentElement;Array.from(n.children).indexOf(this.selectedWindow)+t,n.children.length>1}selectWindowInColumn(t){let n=this.selectedWindow.parentElement,s=Array.from(n.children),e=s.indexOf(this.selectedWindow)+t;e<0&&(e=s.length+t),e>s.length-1&&(e=0),this.selectedWindow=s[e]}selectNeighboringWindow(t){let n=this.selectedWindow.parentElement,s=Array.from(this.children),e=s.indexOf(n)+t;e<0&&(e=s.length+t),e>s.length-1&&(e=0);let r=s[e].children[0];this.selectedWindow=r}listenForKeyPresses(){o.includes("Enter")&&o.includes("e")&&!i.includes("Enter")&&(this.createNewWindow(),i.push("Enter")),!o.includes("Enter")&&i.includes("Enter")&&i.splice(i.indexOf("Enter",1)),o.includes("ArrowRight")&&o.includes("e")&&!i.includes("ArrowRight")&&(this.moveWindowHorizontally(1),i.push("ArrowRight")),o.includes("ArrowRight")&&!o.includes("e")&&!i.includes("ArrowRight")&&(this.selectNeighboringWindow(1),i.push("ArrowRight")),!o.includes("ArrowRight")&&i.includes("ArrowRight")&&i.splice(i.indexOf("ArrowRight",1)),o.includes("ArrowLeft")&&o.includes("e")&&!i.includes("ArrowLeft")&&(this.moveWindowHorizontally(-1),i.push("ArrowLeft")),o.includes("ArrowLeft")&&!o.includes("e")&&!i.includes("ArrowLeft")&&(this.selectNeighboringWindow(-1),i.push("ArrowLeft")),!o.includes("ArrowLeft")&&i.includes("ArrowLeft")&&i.splice(i.indexOf("ArrowLeft",1)),o.includes("ArrowUp")&&!i.includes("ArrowUp")&&(this.selectWindowInColumn(-1),i.push("ArrowUp")),!o.includes("ArrowUp")&&i.includes("ArrowUp")&&i.splice(i.indexOf("ArrowUp"),1),o.includes("ArrowDown")&&!i.includes("ArrowDown")&&(this.selectWindowInColumn(1),i.push("ArrowDown")),!o.includes("ArrowDown")&&i.includes("ArrowDown")&&i.splice(i.indexOf("ArrowDown"),1)}createNewWindow(t={title:"none",content:"none"}){let n=document.createElement("custom-window");n.setAttribute("title",t.title),n.setAttribute("content",t.content),this.querySelector("window-column").appendChild(n),this.selectedWindow=n}connectedCallback(){this.createNewWindow(c.programming),this.createNewWindow(),setInterval(()=>{this.listenForKeyPresses()},10)}}class a extends HTMLElement{constructor(){super()}set created(t){this.setAttribute("created",t)}get created(){return this.hasAttribute("created")||this.setAttribute("created","false"),this.getAttribute("created")==="true"}set title(t){this.setAttribute("title",t)}get title(){return this.getAttribute("title")}set content(t){this.setAttribute("content",t)}get content(){return this.getAttribute("content")}removeWindow(){this.parentElement.children.length==1&&this.parentElement.remove(),this.remove()}connectedCallback(){this.created==!1&&(this.created=!0,console.log(this.created),this.innerHTML=`
        <div class="window-titlebar">
          <p class="window-title">${this.title}</p>
          <div class="window-buttons">
            <i class="ti ti-x window-close-button"></i>
          </div>
        </div>
        <div class="window-content">
          ${this.content}
        </div>
      `,this.querySelector(".window-content").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()})),this.querySelector(".window-title").innerHTML=this.title}}customElements.define("window-manager",w);customElements.define("custom-window",a);customElements.define("custom-text-editor",u);document.querySelector("#app").innerHTML=`
  <div class="main-container">
    <status-bar>
      <div class="branding-container">
        <img src="/src/img/monkey.svg" class="brand-logo" credit="https://www.svgrepo.com/svg/310921/incognito">
        <p>aesthetic programming environment</p>
      </div>
      <status-indicator class="status-indicator">
        <i class="ti ti-database"></i>
        <p>1kB/10mB</p>
      </status-indicator>
    </status-bar>
    <window-manager>

    </window-manager>
  </div>
`;
