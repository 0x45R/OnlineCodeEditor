(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=t(i);fetch(i.href,u)}})();class me extends HTMLElement{constructor(){super()}get windowManager(){return this.parentElement.parentElement}set created(e){this.setAttribute("created",e)}get created(){return this.hasAttribute("created")?this.getAttribute("created")==="true":!1}set title(e){this.setAttribute("title",e)}get title(){return this.hasAttribute("title")||this.setAttribute("title","empty"),this.getAttribute("title")}set content(e){this._content=e}get content(){return this._content==null?"Empty":this._content}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".window-content").focus()}removeWindow(){this.parentElement&&(this.windowManager&&console.log(this.windowManager.selectedWindow),this.parentElement.children.length==1&&this.parentElement.remove(),this.remove())}connectedCallback(){if(!this.created||this.reloadEverytime){this.created=!0,this.basicStructure();let e=document.createElement("div");e.classList.add("basic-buttons"),e.innerHTML='<i class="ti ti-arrows-move window-move-button window-button"></i><i class="ti ti-x window-close-button window-button"></i>',this.querySelector(".window-buttons").appendChild(e),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.addEventListener("mouseover",()=>{this.customFocus()}),document.addEventListener("mousemove",n=>{t(n)}),this.querySelector(".window-move-button").addEventListener("mousedown",n=>{this.classList.contains("follow-cusor")||(this.classList.add("follow-cursor"),this.classList.add("window-floating"),t(n))}),this.querySelector(".window-move-button").addEventListener("mouseup",n=>{this.classList.contains("follow-cursor")&&(this.classList.remove("follow-cursor"),this.classList.remove("window-floating"))});const t=n=>{let u=this.querySelector(".window-move-button").getBoundingClientRect(),l=this.getBoundingClientRect(),s=u.left-l.left,c=u.top-l.top;this.classList.contains("follow-cursor")&&(this.style.top=n.clientY-(c+u.height*2.5)+"px",this.style.left=n.clientX-(s+u.width)+"px")}}}basicStructure(){this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">
          <i class="ti ti-x window-close-button"></i>
        </div>
      </div>
      <div class="window-content">
        ${this.content}
      </div>
    `,this.querySelector(".window-content").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.addEventListener("mouseover",()=>{this.customFocus()}),this.querySelector(".window-title").innerHTML=this.title}}customElements.define("custom-window",me);class wr extends me{constructor(){super()}get content(){return this._content==null?"Empty":this._content}set content(e){this._content=e,this.querySelector(".custom-text-editor").innerHTML=e}saveContent(){b.remove(this.file).then(()=>{b.write(this.file,this.content)}).catch(()=>{b.write(this.file,this.content)}).finally(()=>{Ur()}),console.log(this.file,this.content,"CONTENT")}set file(e){this._file=e}get file(){return this._file==null&&(this._file="new file"),this._file}static new(e){let t=document.createElement("code-editor");return t.file=e,console.log("E",b),b.read(e).then(n=>{console.log(n),t.content=n}),t}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".custom-text-editor").focus()}parseTextEditor(e){let t=e.target.value,n=t.split(`
`).length,i=this.querySelector(".custom-text-editor-columns");this.content=t,console.log(this.content,"CONTENT"),i.innerHTML="";for(let u=1;u<n+1;u++){let l=document.createElement("p");l.innerText=u,i.appendChild(l)}}basicStructure(){this.title=`code editor - ${this.file}`,this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">          
          <i class="ti ti-player-play window-button"></i>
          <i class="ti ti-device-floppy code-save-button window-button"></i>
          <i class="ti ti-download window-download-button window-button"></i>
        </div>
      </div>
      <div class="window-content">
        <div class='custom-text-editor-columns'>1</div><textarea wrap='off' class='custom-text-editor' spellcheck='false'></textarea>
      </div>
    `,this.querySelector(".custom-text-editor").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-download-button").addEventListener("click",()=>{function e(t,n){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(n)),i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}b.read(this.file).then(t=>e(this.file,t))}),this.querySelector(".custom-text-editor").addEventListener("input",e=>{this.parseTextEditor(e)}),this.querySelector(".code-save-button").addEventListener("click",()=>{this.saveContent()}),this.querySelector(".window-title").innerHTML=this.title,this.addEventListener("mouseover",()=>{this.customFocus()})}}customElements.define("code-editor",wr);function pn(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var u=Function.bind.apply(e,i);return new u}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Wt=Object.prototype.toString,Sr=function(e){var t=Wt.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Wt.call(e.callee)==="[object Function]"),n},Ne,_t;function yn(){if(_t)return Ne;_t=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Sr,i=Object.prototype.propertyIsEnumerable,u=!i.call({toString:null},"toString"),l=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(d){var m=d.constructor;return m&&m.prototype===d},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!f["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{c(window[d])}catch{return!0}}catch{return!0}return!1}(),y=function(d){if(typeof window>"u"||!p)return c(d);try{return c(d)}catch{return!1}};r=function(m){var P=m!==null&&typeof m=="object",$=t.call(m)==="[object Function]",C=n(m),Q=P&&t.call(m)==="[object String]",R=[];if(!P&&!$&&!C)throw new TypeError("Object.keys called on a non-object");var I=l&&$;if(Q&&m.length>0&&!e.call(m,0))for(var A=0;A<m.length;++A)R.push(String(A));if(C&&m.length>0)for(var q=0;q<m.length;++q)R.push(String(q));else for(var j in m)!(I&&j==="prototype")&&e.call(m,j)&&R.push(String(j));if(u)for(var re=y(m),E=0;E<s.length;++E)!(re&&s[E]==="constructor")&&e.call(m,s[E])&&R.push(s[E]);return R}}return Ne=r,Ne}var dn=Array.prototype.slice,mn=Sr,Ft=Object.keys,ae=Ft?function(e){return Ft(e)}:yn(),Dt=Object.keys;ae.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(n){return mn(n)?Dt(dn.call(n)):Dt(n)})}else Object.keys=ae;return Object.keys||ae};var hn=ae,br=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==i||l.enumerable!==!0)return!1}return!0},Mt=typeof Symbol<"u"&&Symbol,vn=br,Pr=function(){return typeof Mt!="function"||typeof Symbol!="function"||typeof Mt("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:vn()},gn="Function.prototype.bind called on incompatible ",Ce=Array.prototype.slice,wn=Object.prototype.toString,Sn="[object Function]",bn=function(e){var t=this;if(typeof t!="function"||wn.call(t)!==Sn)throw new TypeError(gn+t);for(var n=Ce.call(arguments,1),i,u=function(){if(this instanceof i){var p=t.apply(this,n.concat(Ce.call(arguments)));return Object(p)===p?p:this}else return t.apply(e,n.concat(Ce.call(arguments)))},l=Math.max(0,t.length-n.length),s=[],c=0;c<l;c++)s.push("$"+c);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var f=function(){};f.prototype=t.prototype,i.prototype=new f,f.prototype=null}return i},Pn=bn,yt=Function.prototype.bind||Pn,An=yt,Ar=An.call(Function.call,Object.prototype.hasOwnProperty),v,Y=SyntaxError,Er=Function,V=TypeError,Le=function(r){try{return Er('"use strict"; return ('+r+").constructor;")()}catch{}},k=Object.getOwnPropertyDescriptor;if(k)try{k({},"")}catch{k=null}var qe=function(){throw new V},En=k?function(){try{return arguments.callee,qe}catch{try{return k(arguments,"callee").get}catch{return qe}}}():qe,K=Pr(),L=Object.getPrototypeOf||function(r){return r.__proto__},z={},On=typeof Uint8Array>"u"?v:L(Uint8Array),B={"%AggregateError%":typeof AggregateError>"u"?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?v:ArrayBuffer,"%ArrayIteratorPrototype%":K?L([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?v:Atomics,"%BigInt%":typeof BigInt>"u"?v:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?v:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?v:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?v:Float32Array,"%Float64Array%":typeof Float64Array>"u"?v:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?v:FinalizationRegistry,"%Function%":Er,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?v:Int8Array,"%Int16Array%":typeof Int16Array>"u"?v:Int16Array,"%Int32Array%":typeof Int32Array>"u"?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":K?L(L([][Symbol.iterator]())):v,"%JSON%":typeof JSON=="object"?JSON:v,"%Map%":typeof Map>"u"?v:Map,"%MapIteratorPrototype%":typeof Map>"u"||!K?v:L(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?v:Promise,"%Proxy%":typeof Proxy>"u"?v:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?v:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?v:Set,"%SetIteratorPrototype%":typeof Set>"u"||!K?v:L(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":K?L(""[Symbol.iterator]()):v,"%Symbol%":K?Symbol:v,"%SyntaxError%":Y,"%ThrowTypeError%":En,"%TypedArray%":On,"%TypeError%":V,"%Uint8Array%":typeof Uint8Array>"u"?v:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?v:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?v:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?v:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?v:WeakMap,"%WeakRef%":typeof WeakRef>"u"?v:WeakRef,"%WeakSet%":typeof WeakSet>"u"?v:WeakSet};try{null.error}catch(r){var xn=L(L(r));B["%Error.prototype%"]=xn}var In=function r(e){var t;if(e==="%AsyncFunction%")t=Le("async function () {}");else if(e==="%GeneratorFunction%")t=Le("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Le("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&(t=L(i.prototype))}return B[e]=t,t},kt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},te=yt,le=Ar,$n=te.call(Function.call,Array.prototype.concat),Tn=te.call(Function.apply,Array.prototype.splice),Bt=te.call(Function.call,String.prototype.replace),ce=te.call(Function.call,String.prototype.slice),Rn=te.call(Function.call,RegExp.prototype.exec),Nn=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Cn=/\\(\\)?/g,Ln=function(e){var t=ce(e,0,1),n=ce(e,-1);if(t==="%"&&n!=="%")throw new Y("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Y("invalid intrinsic syntax, expected opening `%`");var i=[];return Bt(e,Nn,function(u,l,s,c){i[i.length]=s?Bt(c,Cn,"$1"):l||u}),i},qn=function(e,t){var n=e,i;if(le(kt,n)&&(i=kt[n],n="%"+i[0]+"%"),le(B,n)){var u=B[n];if(u===z&&(u=In(n)),typeof u>"u"&&!t)throw new V("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:u}}throw new Y("intrinsic "+e+" does not exist!")},x=function(e,t){if(typeof e!="string"||e.length===0)throw new V("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new V('"allowMissing" argument must be a boolean');if(Rn(/^%?[^%]*%?$/,e)===null)throw new Y("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Ln(e),i=n.length>0?n[0]:"",u=qn("%"+i+"%",t),l=u.name,s=u.value,c=!1,f=u.alias;f&&(i=f[0],Tn(n,$n([0,1],f)));for(var p=1,y=!0;p<n.length;p+=1){var d=n[p],m=ce(d,0,1),P=ce(d,-1);if((m==='"'||m==="'"||m==="`"||P==='"'||P==="'"||P==="`")&&m!==P)throw new Y("property names with quotes must have matching quotes");if((d==="constructor"||!y)&&(c=!0),i+="."+d,l="%"+i+"%",le(B,l))s=B[l];else if(s!=null){if(!(d in s)){if(!t)throw new V("base intrinsic for "+e+" exists, but the property is not available.");return}if(k&&p+1>=n.length){var $=k(s,d);y=!!$,y&&"get"in $&&!("originalValue"in $.get)?s=$.get:s=s[d]}else y=le(s,d),s=s[d];y&&!c&&(B[l]=s)}}return s},Wn=x,at=Wn("%Object.defineProperty%",!0),st=function(){if(at)try{return at({},"a",{value:1}),!0}catch{return!1}return!1};st.hasArrayLengthDefineBug=function(){if(!st())return null;try{return at([],"length",{value:1}).length!==1}catch{return!0}};var _n=st,Fn=hn,Dn=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Mn=Object.prototype.toString,kn=Array.prototype.concat,Or=Object.defineProperty,Bn=function(r){return typeof r=="function"&&Mn.call(r)==="[object Function]"},jn=_n(),xr=Or&&jn,Un=function(r,e,t,n){if(e in r){if(n===!0){if(r[e]===t)return}else if(!Bn(n)||!n())return}xr?Or(r,e,{configurable:!0,enumerable:!1,value:t,writable:!0}):r[e]=t},Ir=function(r,e){var t=arguments.length>2?arguments[2]:{},n=Fn(e);Dn&&(n=kn.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Un(r,n[i],e[n[i]],t[n[i]])};Ir.supportsDescriptors=!!xr;var $r=Ir,fe={},Gn={get exports(){return fe},set exports(r){fe=r}},Hn=x,Kn=Hn("%TypeError%"),zn=function(e,t){if(e==null)throw new Kn(t||"Cannot call method on "+e);return e};(function(r){r.exports=zn})(Gn);var pe={},Jn={get exports(){return pe},set exports(r){pe=r}};(function(r){var e=yt,t=x,n=t("%Function.prototype.apply%"),i=t("%Function.prototype.call%"),u=t("%Reflect.apply%",!0)||e.call(i,n),l=t("%Object.getOwnPropertyDescriptor%",!0),s=t("%Object.defineProperty%",!0),c=t("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}r.exports=function(y){var d=u(e,i,arguments);if(l&&s){var m=l(d,"length");m.configurable&&s(d,"length",{value:1+c(0,y.length-(arguments.length-1))})}return d};var f=function(){return u(e,n,arguments)};s?s(r.exports,"apply",{value:f}):r.exports.apply=f})(Jn);var Tr=x,Rr=pe,Vn=Rr(Tr("String.prototype.indexOf")),X=function(e,t){var n=Tr(e,!!t);return typeof n=="function"&&Vn(e,".prototype.")>-1?Rr(n):n},ye={},Yn={get exports(){return ye},set exports(r){ye=r}},We,jt;function Xn(){if(jt)return We;jt=1;var r=x,e=r("%Array%"),t=!e.isArray&&X("Object.prototype.toString");return We=e.isArray||function(i){return t(i)==="[object Array]"},We}var Ut;function Qn(){return Ut||(Ut=1,function(r){r.exports=Xn()}(Yn)),ye}var Nr=x,Zn=X,ei=Nr("%TypeError%"),ti=Qn(),ri=Nr("%Reflect.apply%",!0)||Zn("%Function.prototype.apply%"),ni=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!ti(n))throw new ei("Assertion failed: optional `argumentsList`, if provided, must be a List");return ri(e,t,n)};const ii={},oi=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"})),ai=pn(oi);var _e,Gt;function si(){if(Gt)return _e;Gt=1;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,u=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=i&&u&&typeof u.get=="function"?u.get:null,s=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,f=c?WeakMap.prototype.has:null,p=typeof WeakSet=="function"&&WeakSet.prototype,y=p?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,P=Boolean.prototype.valueOf,$=Object.prototype.toString,C=Function.prototype.toString,Q=String.prototype.match,R=String.prototype.slice,I=String.prototype.replace,A=String.prototype.toUpperCase,q=String.prototype.toLowerCase,j=RegExp.prototype.test,re=Array.prototype.concat,E=Array.prototype.join,Gr=Array.prototype.slice,mt=Math.floor,ve=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ge=Object.getOwnPropertySymbols,we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,U=typeof Symbol=="function"&&typeof Symbol.iterator=="object",O=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===U||"symbol")?Symbol.toStringTag:null,ht=Object.prototype.propertyIsEnumerable,vt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(o){return o.__proto__}:null);function gt(o,a){if(o===1/0||o===-1/0||o!==o||o&&o>-1e3&&o<1e3||j.call(/e/,a))return a;var g=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof o=="number"){var w=o<0?-mt(-o):mt(o);if(w!==o){var S=String(w),h=R.call(a,S.length+1);return I.call(S,g,"$&_")+"."+I.call(I.call(h,/([0-9]{3})/g,"$&_"),/_$/,"")}}return I.call(a,g,"$&_")}var Se=ai,wt=Se.custom,St=At(wt)?wt:null;_e=function o(a,g,w,S){var h=g||{};if(W(h,"quoteStyle")&&h.quoteStyle!=="single"&&h.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(W(h,"maxStringLength")&&(typeof h.maxStringLength=="number"?h.maxStringLength<0&&h.maxStringLength!==1/0:h.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var F=W(h,"customInspect")?h.customInspect:!0;if(typeof F!="boolean"&&F!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(W(h,"indent")&&h.indent!==null&&h.indent!=="	"&&!(parseInt(h.indent,10)===h.indent&&h.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(W(h,"numericSeparator")&&typeof h.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var M=h.numericSeparator;if(typeof a>"u")return"undefined";if(a===null)return"null";if(typeof a=="boolean")return a?"true":"false";if(typeof a=="string")return Ot(a,h);if(typeof a=="number"){if(a===0)return 1/0/a>0?"0":"-0";var T=String(a);return M?gt(a,T):T}if(typeof a=="bigint"){var D=String(a)+"n";return M?gt(a,D):D}var Ee=typeof h.depth>"u"?5:h.depth;if(typeof w>"u"&&(w=0),w>=Ee&&Ee>0&&typeof a=="object")return be(a)?"[Array]":"[Object]";var G=ln(h,w);if(typeof S>"u")S=[];else if(Et(S,a)>=0)return"[Circular]";function N(H,oe,fn){if(oe&&(S=Gr.call(S),S.push(oe)),fn){var qt={depth:h.depth};return W(h,"quoteStyle")&&(qt.quoteStyle=h.quoteStyle),o(H,qt,w+1,S)}return o(H,h,w+1,S)}if(typeof a=="function"&&!Pt(a)){var It=Zr(a),$t=ne(a,N);return"[Function"+(It?": "+It:" (anonymous)")+"]"+($t.length>0?" { "+E.call($t,", ")+" }":"")}if(At(a)){var Tt=U?I.call(String(a),/^(Symbol\(.*\))_[^)]*$/,"$1"):we.call(a);return typeof a=="object"&&!U?Z(Tt):Tt}if(an(a)){for(var ee="<"+q.call(String(a.nodeName)),Oe=a.attributes||[],ie=0;ie<Oe.length;ie++)ee+=" "+Oe[ie].name+"="+bt(Hr(Oe[ie].value),"double",h);return ee+=">",a.childNodes&&a.childNodes.length&&(ee+="..."),ee+="</"+q.call(String(a.nodeName))+">",ee}if(be(a)){if(a.length===0)return"[]";var xe=ne(a,N);return G&&!un(xe)?"["+Ae(xe,G)+"]":"[ "+E.call(xe,", ")+" ]"}if(zr(a)){var Ie=ne(a,N);return!("cause"in Error.prototype)&&"cause"in a&&!ht.call(a,"cause")?"{ ["+String(a)+"] "+E.call(re.call("[cause]: "+N(a.cause),Ie),", ")+" }":Ie.length===0?"["+String(a)+"]":"{ ["+String(a)+"] "+E.call(Ie,", ")+" }"}if(typeof a=="object"&&F){if(St&&typeof a[St]=="function"&&Se)return Se(a,{depth:Ee-w});if(F!=="symbol"&&typeof a.inspect=="function")return a.inspect()}if(en(a)){var Rt=[];return n&&n.call(a,function(H,oe){Rt.push(N(oe,a,!0)+" => "+N(H,a))}),xt("Map",t.call(a),Rt,G)}if(nn(a)){var Nt=[];return s&&s.call(a,function(H){Nt.push(N(H,a))}),xt("Set",l.call(a),Nt,G)}if(tn(a))return Pe("WeakMap");if(on(a))return Pe("WeakSet");if(rn(a))return Pe("WeakRef");if(Vr(a))return Z(N(Number(a)));if(Xr(a))return Z(N(ve.call(a)));if(Yr(a))return Z(P.call(a));if(Jr(a))return Z(N(String(a)));if(!Kr(a)&&!Pt(a)){var $e=ne(a,N),Ct=vt?vt(a)===Object.prototype:a instanceof Object||a.constructor===Object,Te=a instanceof Object?"":"null prototype",Lt=!Ct&&O&&Object(a)===a&&O in a?R.call(_(a),8,-1):Te?"Object":"",cn=Ct||typeof a.constructor!="function"?"":a.constructor.name?a.constructor.name+" ":"",Re=cn+(Lt||Te?"["+E.call(re.call([],Lt||[],Te||[]),": ")+"] ":"");return $e.length===0?Re+"{}":G?Re+"{"+Ae($e,G)+"}":Re+"{ "+E.call($e,", ")+" }"}return String(a)};function bt(o,a,g){var w=(g.quoteStyle||a)==="double"?'"':"'";return w+o+w}function Hr(o){return I.call(String(o),/"/g,"&quot;")}function be(o){return _(o)==="[object Array]"&&(!O||!(typeof o=="object"&&O in o))}function Kr(o){return _(o)==="[object Date]"&&(!O||!(typeof o=="object"&&O in o))}function Pt(o){return _(o)==="[object RegExp]"&&(!O||!(typeof o=="object"&&O in o))}function zr(o){return _(o)==="[object Error]"&&(!O||!(typeof o=="object"&&O in o))}function Jr(o){return _(o)==="[object String]"&&(!O||!(typeof o=="object"&&O in o))}function Vr(o){return _(o)==="[object Number]"&&(!O||!(typeof o=="object"&&O in o))}function Yr(o){return _(o)==="[object Boolean]"&&(!O||!(typeof o=="object"&&O in o))}function At(o){if(U)return o&&typeof o=="object"&&o instanceof Symbol;if(typeof o=="symbol")return!0;if(!o||typeof o!="object"||!we)return!1;try{return we.call(o),!0}catch{}return!1}function Xr(o){if(!o||typeof o!="object"||!ve)return!1;try{return ve.call(o),!0}catch{}return!1}var Qr=Object.prototype.hasOwnProperty||function(o){return o in this};function W(o,a){return Qr.call(o,a)}function _(o){return $.call(o)}function Zr(o){if(o.name)return o.name;var a=Q.call(C.call(o),/^function\s*([\w$]+)/);return a?a[1]:null}function Et(o,a){if(o.indexOf)return o.indexOf(a);for(var g=0,w=o.length;g<w;g++)if(o[g]===a)return g;return-1}function en(o){if(!t||!o||typeof o!="object")return!1;try{t.call(o);try{l.call(o)}catch{return!0}return o instanceof Map}catch{}return!1}function tn(o){if(!f||!o||typeof o!="object")return!1;try{f.call(o,f);try{y.call(o,y)}catch{return!0}return o instanceof WeakMap}catch{}return!1}function rn(o){if(!m||!o||typeof o!="object")return!1;try{return m.call(o),!0}catch{}return!1}function nn(o){if(!l||!o||typeof o!="object")return!1;try{l.call(o);try{t.call(o)}catch{return!0}return o instanceof Set}catch{}return!1}function on(o){if(!y||!o||typeof o!="object")return!1;try{y.call(o,y);try{f.call(o,f)}catch{return!0}return o instanceof WeakSet}catch{}return!1}function an(o){return!o||typeof o!="object"?!1:typeof HTMLElement<"u"&&o instanceof HTMLElement?!0:typeof o.nodeName=="string"&&typeof o.getAttribute=="function"}function Ot(o,a){if(o.length>a.maxStringLength){var g=o.length-a.maxStringLength,w="... "+g+" more character"+(g>1?"s":"");return Ot(R.call(o,0,a.maxStringLength),a)+w}var S=I.call(I.call(o,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,sn);return bt(S,"single",a)}function sn(o){var a=o.charCodeAt(0),g={8:"b",9:"t",10:"n",12:"f",13:"r"}[a];return g?"\\"+g:"\\x"+(a<16?"0":"")+A.call(a.toString(16))}function Z(o){return"Object("+o+")"}function Pe(o){return o+" { ? }"}function xt(o,a,g,w){var S=w?Ae(g,w):E.call(g,", ");return o+" ("+a+") {"+S+"}"}function un(o){for(var a=0;a<o.length;a++)if(Et(o[a],`
`)>=0)return!1;return!0}function ln(o,a){var g;if(o.indent==="	")g="	";else if(typeof o.indent=="number"&&o.indent>0)g=E.call(Array(o.indent+1)," ");else return null;return{base:g,prev:E.call(Array(a+1),g)}}function Ae(o,a){if(o.length===0)return"";var g=`
`+a.prev+a.base;return g+E.call(o,","+g)+`
`+a.prev}function ne(o,a){var g=be(o),w=[];if(g){w.length=o.length;for(var S=0;S<o.length;S++)w[S]=W(o,S)?a(o[S],o):""}var h=typeof ge=="function"?ge(o):[],F;if(U){F={};for(var M=0;M<h.length;M++)F["$"+h[M]]=h[M]}for(var T in o)W(o,T)&&(g&&String(Number(T))===T&&T<o.length||U&&F["$"+T]instanceof Symbol||(j.call(/[^\w$]/,T)?w.push(a(T,o)+": "+a(o[T],o)):w.push(T+": "+a(o[T],o))));if(typeof ge=="function")for(var D=0;D<h.length;D++)ht.call(o,h[D])&&w.push("["+a(h[D])+"]: "+a(o[h[D]],o));return w}return _e}var Fe,Ht;function ui(){return Ht||(Ht=1,Fe=function(e){return typeof e=="string"||typeof e=="symbol"}),Fe}var De,Kt;function li(){return Kt||(Kt=1,De=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}),De}var Me,zt;function he(){if(zt)return Me;zt=1;var r=li();return Me=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":r(t)},Me}var ci=x,Jt=ci("%TypeError%"),fi=si(),pi=ui(),yi=he(),Cr=function(e,t){if(yi(e)!=="Object")throw new Jt("Assertion failed: Type(O) is not Object");if(!pi(t))throw new Jt("Assertion failed: IsPropertyKey(P) is not true, got "+fi(t));return e[t]},ut={},di={get exports(){return ut},set exports(r){ut=r}},Lr=Function.prototype.toString,J=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,lt,se;if(typeof J=="function"&&typeof Object.defineProperty=="function")try{lt=Object.defineProperty({},"length",{get:function(){throw se}}),se={},J(function(){throw 42},null,lt)}catch(r){r!==se&&(J=null)}else J=null;var mi=/^\s*class\b/,ct=function(e){try{var t=Lr.call(e);return mi.test(t)}catch{return!1}},ke=function(e){try{return ct(e)?!1:(Lr.call(e),!0)}catch{return!1}},ue=Object.prototype.toString,hi="[object Object]",vi="[object Function]",gi="[object GeneratorFunction]",wi="[object HTMLAllCollection]",Si="[object HTML document.all class]",bi="[object HTMLCollection]",Pi=typeof Symbol=="function"&&!!Symbol.toStringTag,Ai=!(0 in[,]),ft=function(){return!1};if(typeof document=="object"){var Ei=document.all;ue.call(Ei)===ue.call(document.all)&&(ft=function(e){if((Ai||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=ue.call(e);return(t===wi||t===Si||t===bi||t===hi)&&e("")==null}catch{}return!1})}var qr=J?function(e){if(ft(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{J(e,null,lt)}catch(t){if(t!==se)return!1}return!ct(e)&&ke(e)}:function(e){if(ft(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Pi)return ke(e);if(ct(e))return!1;var t=ue.call(e);return t!==vi&&t!==gi&&!/^\[object HTML/.test(t)?!1:ke(e)};(function(r){r.exports=qr})(di);var Be,Vt;function Oi(){if(Vt)return Be;Vt=1;var r=x,e=r("%Math%"),t=r("%Number%");return Be=t.MAX_SAFE_INTEGER||e.pow(2,53)-1,Be}var je,Yt;function xi(){if(Yt)return je;Yt=1;var r=x,e=r("%Math.abs%");return je=function(n){return e(n)},je}var Ue,Xt;function Ii(){if(Xt)return Ue;Xt=1;var r=he(),e=Math.floor;return Ue=function(n){return r(n)==="BigInt"?n:e(n)},Ue}var Ge,Qt;function $i(){return Qt||(Qt=1,Ge=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),Ge}var He,Zt;function Ti(){return Zt||(Zt=1,He=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),He}var Ke,er;function Wr(){if(er)return Ke;er=1;var r=br;return Ke=function(){return r()&&!!Symbol.toStringTag},Ke}var ze,tr;function Ri(){if(tr)return ze;tr=1;var r=Date.prototype.getDay,e=function(l){try{return r.call(l),!0}catch{return!1}},t=Object.prototype.toString,n="[object Date]",i=Wr()();return ze=function(l){return typeof l!="object"||l===null?!1:i?e(l):t.call(l)===n},ze}var de={},rr={get exports(){return de},set exports(r){de=r}},nr;function Ni(){if(nr)return de;nr=1;var r=Object.prototype.toString,e=Pr();if(e){var t=Symbol.prototype.toString,n=/^Symbol\(.*\)$/,i=function(l){return typeof l.valueOf()!="symbol"?!1:n.test(t.call(l))};rr.exports=function(l){if(typeof l=="symbol")return!0;if(r.call(l)!=="[object Symbol]")return!1;try{return i(l)}catch{return!1}}}else rr.exports=function(l){return!1};return de}var Je,ir;function Ci(){if(ir)return Je;ir=1;var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",e=Ti(),t=qr,n=Ri(),i=Ni(),u=function(c,f){if(typeof c>"u"||c===null)throw new TypeError("Cannot call method on "+c);if(typeof f!="string"||f!=="number"&&f!=="string")throw new TypeError('hint must be "string" or "number"');var p=f==="string"?["toString","valueOf"]:["valueOf","toString"],y,d,m;for(m=0;m<p.length;++m)if(y=c[p[m]],t(y)&&(d=y.call(c),e(d)))return d;throw new TypeError("No default value")},l=function(c,f){var p=c[f];if(p!==null&&typeof p<"u"){if(!t(p))throw new TypeError(p+" returned for property "+f+" of object "+c+" is not a function");return p}};return Je=function(c){if(e(c))return c;var f="default";arguments.length>1&&(arguments[1]===String?f="string":arguments[1]===Number&&(f="number"));var p;if(r&&(Symbol.toPrimitive?p=l(c,Symbol.toPrimitive):i(c)&&(p=Symbol.prototype.valueOf)),typeof p<"u"){var y=p.call(c,f);if(e(y))return y;throw new TypeError("unable to convert exotic object to primitive")}return f==="default"&&(n(c)||i(c))&&(f="string"),u(c,f==="default"?"number":f)},Je}var Ve,or;function Li(){if(or)return Ve;or=1;var r=Ci();return Ve=function(t){return arguments.length>1?r(t,arguments[1]):r(t)},Ve}var Ye,ar;function qi(){if(ar)return Ye;ar=1;var r=X,e=Wr()(),t,n,i,u;if(e){t=r("Object.prototype.hasOwnProperty"),n=r("RegExp.prototype.exec"),i={};var l=function(){throw i};u={toString:l,valueOf:l},typeof Symbol.toPrimitive=="symbol"&&(u[Symbol.toPrimitive]=l)}var s=r("Object.prototype.toString"),c=Object.getOwnPropertyDescriptor,f="[object RegExp]";return Ye=e?function(y){if(!y||typeof y!="object")return!1;var d=c(y,"lastIndex"),m=d&&t(d,"value");if(!m)return!1;try{n(y,u)}catch(P){return P===i}}:function(y){return!y||typeof y!="object"&&typeof y!="function"?!1:s(y)===f},Ye}var Xe,sr;function Wi(){if(sr)return Xe;sr=1;var r=X,e=x,t=qi(),n=r("RegExp.prototype.exec"),i=e("%TypeError%");return Xe=function(l){if(!t(l))throw new i("`regex` must be a RegExp");return function(c){return n(l,c)!==null}},Xe}var Qe,ur;function _i(){if(ur)return Qe;ur=1;var r=x,e=r("%Number%"),t=r("%RegExp%"),n=r("%TypeError%"),i=r("%parseInt%"),u=X,l=Wi(),s=u("String.prototype.slice"),c=l(/^0b[01]+$/i),f=l(/^0o[0-7]+$/i),p=l(/^[-+]0x[0-9a-f]+$/i),y=["","​","￾"].join(""),d=new t("["+y+"]","g"),m=l(d),P=[`	
\v\f\r   ᠎    `,"         　\u2028","\u2029\uFEFF"].join(""),$=new RegExp("(^["+P+"]+)|(["+P+"]+$)","g"),C=u("String.prototype.replace"),Q=function(I){return C(I,$,"")},R=he();return Qe=function I(A){if(R(A)!=="String")throw new n("Assertion failed: `argument` is not a String");if(c(A))return e(i(s(A,2),2));if(f(A))return e(i(s(A,2),8));if(m(A)||p(A))return NaN;var q=Q(A);return q!==A?I(q):e(A)},Qe}var Ze,lr;function Fi(){if(lr)return Ze;lr=1;var r=x,e=r("%TypeError%"),t=r("%Number%"),n=$i(),i=Li(),u=_i();return Ze=function(s){var c=n(s)?s:i(s,t);if(typeof c=="symbol")throw new e("Cannot convert a Symbol value to a number");if(typeof c=="bigint")throw new e("Conversion from 'BigInt' to 'number' is not allowed.");return typeof c=="string"?u(c):t(c)},Ze}var et,cr;function _r(){return cr||(cr=1,et=Number.isNaN||function(e){return e!==e}),et}var tt,fr;function Di(){if(fr)return tt;fr=1;var r=_r();return tt=function(e){return(typeof e=="number"||typeof e=="bigint")&&!r(e)&&e!==1/0&&e!==-1/0},tt}var rt,pr;function Mi(){return pr||(pr=1,rt=function(e){return e>=0?1:-1}),rt}var nt,yr;function ki(){if(yr)return nt;yr=1;var r=xi(),e=Ii(),t=Fi(),n=_r(),i=Di(),u=Mi();return nt=function(s){var c=t(s);if(n(c)||c===0)return 0;if(!i(c))return c;var f=e(r(c));return f===0?0:u(c)*f},nt}var it,dr;function Bi(){if(dr)return it;dr=1;var r=Oi(),e=ki();return it=function(n){var i=e(n);return i<=0?0:i>r?r:i},it}var ji=x,Ui=ji("%TypeError%"),Gi=Cr,Hi=Bi(),Ki=he(),zi=function(e){if(Ki(e)!=="Object")throw new Ui("Assertion failed: `obj` must be an Object");return Hi(Gi(e,"length"))},Ji=function(e){return!!e},Vi=x,Yi=Vi("%Object%"),Xi=fe,Qi=function(e){return Xi(e),Yi(e)},Fr=x,Zi=Fr("%String%"),eo=Fr("%TypeError%"),to=function(e){if(typeof e=="symbol")throw new eo("Cannot convert a Symbol value to a string");return Zi(e)},ro=ni,no=Cr,io=ut,oo=zi,ao=Ji,so=Qi,uo=to,Dr=function(e){var t=so(this),n=oo(t);if(!io(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:void 0,u=0;u<n;){var l=uo(u),s=no(t,l),c=ao(ro(e,i,[s,u,t]));if(c)return u;u+=1}return-1},lo=Dr,Mr=function(){var e=Array.prototype.findIndex&&[,1].findIndex(function(t,n){return n===0})===0;return e?Array.prototype.findIndex:lo},co=Ar,kr=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",fo=kr&&Array.prototype[Symbol.unscopables],mr=TypeError,po=function(e){if(typeof e!="string"||!e)throw new mr("method must be a non-empty string");if(!co(Array.prototype,e))throw new mr("method must be on Array.prototype");kr&&(fo[e]=!0)},yo=$r,mo=po,ho=Mr,vo=function(){var e=ho();return yo(Array.prototype,{findIndex:e},{findIndex:function(){return Array.prototype.findIndex!==e}}),mo("findIndex"),e},go=$r,wo=fe,So=pe,bo=X,Po=Dr,Br=Mr,Ao=vo,Eo=bo("Array.prototype.slice"),Oo=So.apply(Br()),xo=function(e,t){wo(e);var n=Eo(arguments,1);return Oo(e,n)};go(xo,{getPolyfill:Br,implementation:Po,shim:Ao});/*! http://mths.be/startswith v0.2.0 by @mathias */String.prototype.startsWith||function(){var r=function(){try{var n={},i=Object.defineProperty,u=i(n,n,n)&&i}catch{}return u}(),e={}.toString,t=function(n){if(this==null)throw TypeError();var i=String(this);if(n&&e.call(n)=="[object RegExp]")throw TypeError();var u=i.length,l=String(n),s=l.length,c=arguments.length>1?arguments[1]:void 0,f=c?Number(c):0;f!=f&&(f=0);var p=Math.min(Math.max(f,0),u);if(s+p>u)return!1;for(var y=-1;++y<s;)if(i.charCodeAt(p+y)!=l.charCodeAt(y))return!1;return!0};r?r(String.prototype,"startsWith",{value:t,configurable:!0,writable:!0}):String.prototype.startsWith=t}();/*! https://mths.be/includes v0.2.0 by @mathias */String.prototype.includes||function(){var r={}.toString,e=function(){try{var i={},u=Object.defineProperty,l=u(i,i,i)&&u}catch{}return l}(),t="".indexOf,n=function(i){if(this==null)throw TypeError();var u=String(this);if(i&&r.call(i)=="[object RegExp]")throw TypeError();var l=u.length,s=String(i),c=s.length,f=arguments.length>1?arguments[1]:void 0,p=f?Number(f):0;p!=p&&(p=0);var y=Math.min(Math.max(p,0),l);return c+y>l?!1:t.call(u,s,p)!=-1};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}();/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var r=function(){try{var t={},n=Object.defineProperty,i=n(t,t,t)&&n}catch{}return i}(),e=function(t){if(this==null)throw TypeError();var n=String(this),i=t?Number(t):0;if(i!=i&&(i=0),i<0||i==1/0)throw RangeError();for(var u="";i;)i%2==1&&(u+=n),i>1&&(n+=n),i>>=1;return u};r?r(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}();function Io(r,e){return e.map(function(t,n){var i=n+1,u=i.toString().length,l=" ".repeat(r-u);return l+i+"  "+t})}var jr=Io,$o=jr,To=6,Ro="-n";function No(r,e){var t=0,n=e.findIndex(function(u){return u===Ro}),i=n!==-1;i&&e.splice(n,1),Promise.all(e.map(function(u){return r.system.read(u).then(null,function(l){return t=1,"cat: "+l})})).then(function(u){return i?$o(To,u):u}).then(function(u){r.output(u.join(`
`)),r.exit(t)})}var Co=No;function Lo(r,e){var t=e[0]||"/home/"+r.system.state.user;r.system.changeDir(t).then(r.exit,function(n){r.error(n),r.exit(1)})}var qo=Lo,hr="SINGLE_COPY";function Wo(r,e){var t=e.findIndex(function(s){return s==="-r"||s==="-R"}),n=t!==-1;if(n&&e.splice(t,1),!e.length){r.error("cp: missing file operand"),r.exit(1);return}if(e.length===1){r.error("cp: missing destination file operand after ‘"+e[0]+"’"),r.exit(1);return}var i=e[e.length-1],u=e.slice(0,-1);function l(s,c){return r.system.stat(s).then(function(f){return f.type==="dir"&&!n?Promise.reject("cp: omitting directory ‘"+s+"’"):r.system.copy(s,c)})}r.system.stat(i).then(function(s){if(s.type!=="dir")return Promise.reject()}).catch(function(){return u.length!==1?Promise.reject("cp: target ‘"+i+"’ is not a directory"):hr}).then(function(s){return s===hr?l(u[0],i):Promise.all(u.map(function(c){var f=c.split("/"),p=f[f.length-1],y=i+"/"+p;return l(c,y)}))}).then(function(){r.exit(0)}).catch(function(s){r.error(s),r.exit(1)})}var _o=Wo,Fo=jr,Do=5;function Mo(r){r.system.getHistory().then(function(e){r.output(Fo(Do,e).join(`
`)),r.exit()})}var ko=Mo,Bo=`
The output here is limited.
On a real system you would also see file permissions, user, group, block size and more.`;function jo(r,e){var t=e.findIndex(function(p){return p==="-a"}),n=t!==-1;n&&e.splice(t,1);var i=e.findIndex(function(p){return p==="-l"}),u=i!==-1;u&&e.splice(i,1);var l=e.findIndex(function(p){return p==="-la"});l!==-1&&(n=!0,u=!0,e.splice(l,1));var s=e.findIndex(function(p){return p==="-al"});s!==-1&&(n=!0,u=!0,e.splice(s,1)),e.length||e.push(".");function c(p){return n?p:p.filter(function(y){return y[0]!=="."})}function f(p,y){return u?Promise.all(y.map(function(d){return r.system.stat(p+"/"+d).then(function(m){var P=new Date(m.modified),$=P.toDateString().slice(4,10)+" "+P.toTimeString().slice(0,5),C=m.type;return C==="dir"&&(C+=" "),C+"  "+$+"  "+m.name})})).then(function(d){return"total "+d.length+`
`+d.join(`
`)+Bo}):Promise.resolve(y.join(" "))}Promise.all(e.sort().map(function(p){return r.system.readDir(p).then(c).then(function(y){return f(p,y)}).then(function(y){return e.length===1?y:p+`:
`+y})})).then(function(p){return p.join(`

`)}).then(function(p){r.output(p),r.exit()},function(p){r.output("ls: "+p),r.exit(2)})}var Uo=jo;function Go(r,e){if(!e.length){r.error("mkdir: missing operand"),r.exit(1);return}Promise.all(e.map(function(t){return r.system.createDir(t)})).then(function(){r.exit()},function(t){r.error(t),r.exit(1)})}var Ho=Go,vr="SINGLE_COPY";function Ko(r,e){var t=e.findIndex(function(s){return s==="-n"}),n=t!==-1;if(n&&e.splice(t,1),!e.length){r.error("mv: missing file operand"),r.exit(1);return}if(e.length===1){r.error("mv: missing destination file operand after ‘"+e[0]+"’"),r.exit(1);return}var i=e[e.length-1],u=e.slice(0,-1);function l(s,c){return n?r.system.stat(c).catch(function(){return r.system.copy(s,c).then(function(){return r.system.remove(s)})}):r.system.copy(s,c).then(function(){return r.system.remove(s)})}r.system.stat(i).then(function(s){if(s.type!=="dir")return Promise.reject()}).catch(function(){return u.length!==1?Promise.reject("mv: target ‘"+i+"’ is not a directory"):vr}).then(function(s){return s===vr?l(u[0],i):Promise.all(u.map(function(c){var f=c.split("/"),p=f[f.length-1],y=i+"/"+p;return l(c,y)}))}).then(function(){r.exit(0)}).catch(function(s){r.error(s),r.exit(1)})}var zo=Ko;function Jo(r,e){r.system.getDir().then(function(t){r.output(t),r.exit()})}var Vo=Jo;function Yo(r,e){var t=e.findIndex(function(i){return i.toLowerCase()==="-r"}),n=t!==-1;if(n&&e.splice(t,1),!e.length){r.error("rm: missing operand"),r.exit(1);return}Promise.all(e.map(function(i){return r.system.stat(i).then(function(u){var l=u.type==="dir";if(l&&!n)return Promise.reject("rm: cannot remove ‘"+i+"’: Is a directory")},function(){}).then(function(){return r.system.remove(i)})})).then(function(){r.exit()},function(i){r.error(i),r.exit(1)})}var Xo=Yo;function Qo(r,e){if(!e.length){r.error("rmdir: missing operand"),r.exit(1);return}Promise.all(e.map(function(t){return r.system.stat(t).then(function(n){if(n.type!=="dir")return Promise.reject("rmdir: cannot remove ‘"+t+"’: Not a directory")},function(){}).then(function(){return r.system.readDir(t)}).then(function(n){if(n.length)return Promise.reject("rmdir: failed to remove ‘"+t+"’: Directory not empty")}).then(function(){return r.system.remove(t)})})).then(function(){r.exit()},function(t){r.error(t),r.exit(1)})}var Zo=Qo;function ea(r,e){if(!e.length){r.error("touch: missing file operand"),r.exit(1);return}Promise.all(e.map(function(t){return r.system.write(t,"")})).then(function(){r.exit()},function(t){r.error(t),r.exit(1)})}var ta=ea,ra={cat:Co,cd:qo,cp:_o,history:ko,ls:Uo,mkdir:Ho,mv:zo,pwd:Vo,rm:Xo,rmdir:Zo,touch:ta},na=ra,ot=na;function ia(r){var e=oa(r),t={};function n(l){return sa(e.workingDirectory,l)}function i(l){var s=n(l).split("/").slice(0,-1).join("/");return u.stat(s).then(function(c){return c.type==="dir"?Promise.resolve():Promise.reject(s+": Is not a directory")})}var u={commands:ot,state:e,run:function(l){var s=l.split(" "),c=s.shift();if(e.history.push(l),!ot[c])return Promise.reject(c+": command not found");var f="";return new Promise(function(p,y){ot[c]({output:function(d){f+=d},error:function(d){f+=d},exit:function(d){d?y(f):p(f)},system:u},s)})},getDir:function(){return Promise.resolve(e.workingDirectory)},changeDir:function(l){var s=n(l);return e.fileSystem[s]?(e.workingDirectory=s,Promise.resolve()):Promise.reject(s+": No such file or directory")},read:function(l){var s=n(l);return e.fileSystem[s]?e.fileSystem[s].type!=="file"?Promise.reject(l+": Is a directory"):Promise.resolve(e.fileSystem[s].content):Promise.reject(l+": No such file or directory")},readDir:function(l){var s=n(l);if(!e.fileSystem[s])return Promise.reject("cannot access ‘"+l+"’: No such file or directory");var c=Object.keys(e.fileSystem).filter(function(f){return f.startsWith(s)&&f!==s}).map(function(f){return f.substr(s==="/"?s.length:s.length+1)}).filter(function(f){return!f.includes("/")}).sort();return Promise.resolve(c)},stat:function(l){var s=n(l);if(!e.fileSystem[s])return Promise.reject(l+": No such file or directory");var c=s.split("/");return Promise.resolve({modified:e.fileSystem[s].modified,type:e.fileSystem[s].type,name:c[c.length-1]})},createDir:function(l){return u.stat(l).then(function(){return Promise.reject("cannot create directory '"+l+"': File exists")},function(){return i(l)}).then(function(){var s=n(l);e.fileSystem[s]={type:"dir",modified:Date.now()}})},write:function(l,s){if(typeof s!="string")try{s=JSON.stringify(s)}catch(c){return Promise.reject(c)}return i(l).then(function(){var c=n(l);return u.stat(l).then(function(f){if(f.type!=="file")return Promise.reject(c+": Is a folder");var p=e.fileSystem[c].content;e.fileSystem[c].content=p+s,e.fileSystem[c].modified=Date.now()},function(){e.fileSystem[c]={type:"file",modified:Date.now(),content:s}})})},remove:function(l){var s=n(l);return e.fileSystem[s]?(Object.keys(e.fileSystem).forEach(function(c){c.startsWith(s)&&delete e.fileSystem[c]}),Promise.resolve()):Promise.reject("cannot remove ‘"+l+"’: No such file or directory")},copy:function(l,s){var c=n(l),f=n(s);if(!e.fileSystem[c])return Promise.reject(l+": No such file or directory");function p(y){if(y.startsWith(c)){var d=y.replace(c,f);e.fileSystem[d]=e.fileSystem[y]}}return i(f).then(function(){Object.keys(e.fileSystem).forEach(p)})},getHistory:function(){return Promise.resolve(e.history)},completeUp:function(l){var s=t.historySize!==e.history.length,c=l!==t.input;if(c||s)t.input=l,t.index=0,t.historySize=e.history.length,t.list=e.history.filter(function(f){return f.startsWith(l)}).reverse();else if(t.index<t.list.length-1)t.index++;else return Promise.resolve(void 0);return Promise.resolve(t.list[t.index])},completeDown:function(l){return l!==t.input||!t.index?Promise.resolve(void 0):(t.index--,Promise.resolve(t.list[t.index]))}};return u}function oa(r){var e=aa();return r&&Object.keys(e).forEach(function(t){r[t]&&(e[t]=r[t])}),e}function aa(){return{history:[],fileSystem:{"/":{type:"dir",modified:Date.now()},"/home":{type:"dir",modified:Date.now()},"/home/user":{type:"dir",modified:Date.now()}},user:"user",workingDirectory:"/home/user"}}function sa(r,e){if(!e)return r;for(var t=(e.charAt(0)==="/"?"":r+"/")+e,n=t.split("/").filter(function(c){return!!c}),i=0,u=n.length-1;u>=0;u--){var l=n[u];l==="."?n.splice(u,1):l===".."?(n.splice(u,1),i++):i&&(n.splice(u,1),i--)}return"/"+n.join("/")}var gr=ia;const ua=()=>{let r;if(!localStorage.bashEmulator)r=gr({workingDirectory:"/",fileSystem:{"/":{type:"dir",modified:Date.now()},"/welcome.html":{type:"file",content:`<style>*{margin:0;padding:0;box-sizing:border-box; background: black; color: green;}</style><div style="display: flex; gap: 1em;flex-flow: column; justify-content: center; align-items:center; height:100%">
<h1>Happy hacking :)</h1><h4>Don't know where to start? <br>Start with typing "commands" in terminal</h4></div>`,modified:Date.now()}}});else{var e=JSON.parse(localStorage.bashEmulator||"{}");r=gr(e)}return r},b=ua();b.commands.commands=r=>{r.output(`Available commands:
`),r.output(Object.keys(b.commands).join(`
`)),r.exit()};b.commands.clear=(r,e)=>{r.output("pleaseclear"),r.exit()};b.commands.exit=(r,e)=>{r.output("exitnowplease"),r.exit()};b.commands.edit=(r,e)=>{if(e.join("").trim().length==0){r.error("No file to open"),r.exit();return}document.querySelector("window-manager").createNewWindow(wr.new(e[0])),r.exit()};b.commands.iframe=(r,e)=>{if(e.join("").trim().length==0){r.error("No file to open"),r.exit();return}document.querySelector("window-manager").createNewWindow(dt.new(e[0])),r.exit()};function la(r,e){if(r==0)return"0 Bytes";var t=1024,n=e||2,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],u=Math.floor(Math.log(r)/Math.log(t));return parseFloat((r/Math.pow(t,u)).toFixed(n))+" "+i[u]}var ca=()=>la(1024*1024*5-escape(encodeURIComponent(JSON.stringify(localStorage))).length,2);const Ur=()=>{localStorage.bashEmulator=JSON.stringify(b.state),document.querySelector(".status-indicator").innerText=`Storage left: ${ca()}`};class pt extends me{constructor(){super()}static new(){let e=document.createElement("terminal-emulator");return console.log(e),e}set content(e){this._content=e,this.querySelector(".terminal-emulator-content")&&(this.querySelector(".terminal-emulator-content").innerText=e)}get content(){return this._content}error(e){e&&(this.content=this.content+e+`
`)}run(e){return this.log(`$ ${e}`),b.run(e).then(t=>{this.log(t)},t=>{this.error(t)}).then(Ur)}log(e){if(e=="pleaseclear"){this.content="";return}if(e=="exitnowplease"){this.removeWindow();return}e&&(this.content=this.content+e+`
`,this.querySelector(".terminal-emulator-content").scrollTop=this.querySelector(".terminal-emulator-content").scrollHeight)}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".terminal-emulator-input").focus()}basicStructure(){this.title="terminal emulator",this.content="",this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">    
        </div>
      </div>
      <div class="window-terminal-content">
        <p class='terminal-emulator-content' spellcheck='false'></p>
        <input type='text' class='terminal-emulator-input'></input>
      </div>
    `,this.terminal_emulator_content=this.querySelector(".terminal-emulator-content"),this.terminal_emulator_content.innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-title").innerHTML=this.title,this.terminal_emulator_input=this.querySelector(".terminal-emulator-input"),this.terminal_emulator_input.addEventListener("keydown",e=>{let t=this.terminal_emulator_input;e.key=="ArrowUp"&&(e.preventDefault(),b.getHistory().then(n=>{t.value=n[0]})),e.key=="ArrowDown"&&(e.preventDefault(),b.getHistory().then(n=>{t.value=n[2]})),e.key=="Enter"&&t.value.trim().length!=0&&(this.run(t.value),t.value="")}),this.run("pwd")}}customElements.define("terminal-emulator",pt);class dt extends me{constructor(){super(),this.reloadEverytime=!0}static new(e){let t=document.createElement("iframe-window");return t.file=e,b.read(e).then(n=>{console.log(n),t.content=n}),t}get content(){return this._content==null?"":this._content}set content(e){this._content=e;let t=this.querySelector(".iframe-window-content");t!=null&&(t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close())}set file(e){this._file=e}get file(){return this._file==null&&(this._file="new file"),this._file}basicStructure(){this.title=`iframe - ${this.file}`,this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">          
          <i class="ti ti-refresh window-refresh-button window-button"></i>         
          <i class="ti ti-download window-download-button window-button"></i>     
        </div>
      </div>
      <div class="window-content">
        <iframe wrap='off' class='iframe-window-content' spellcheck='false'></iframe>
      </div>
    `,this.content=this.content,this.classList.add("window-container"),this.querySelector(".window-download-button").addEventListener("click",()=>{function e(t,n){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(n)),i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}b.read(this.file).then(t=>e(this.file,t))}),this.querySelector(".window-refresh-button").addEventListener("click",()=>{b.read(this.file).then(e=>{console.log(e),this.content=e,this.connectedCallback()})}),this.querySelector(".window-title").innerHTML=this.title,this.addEventListener("mouseover",()=>{this.customFocus()})}}customElements.define("iframe-window",dt);class fa extends HTMLElement{constructor(){super()}get windowColumns(){return this.querySelectorAll(".window-column")}get allWindows(){return this.querySelectorAll(".window-container")}get selectedWindow(){return this._selectedWindow==null?(this._selectedWindow=this.querySelector(".window-container"),this._selectedWindow):this._selectedWindow}set selectedWindow(e){this.selectedWindow.classList.remove("selected-window"),this._selectedWindow=e,this._selectedWindow!=null&&(this._selectedWindow!=e&&this._selectedWindow.customFocus(),e.classList.add("selected-window"))}createNewColumn(e){let t=document.createElement("window-column");return t.classList.add("window-column"),e>0?this.appendChild(t):this.prepend(t),t}moveSelectedWindowHorizontally(e){let t=this.selectedWindow.parentElement,n=Array.from(this.children),i=n.indexOf(t)+e,u=i<0||i>n.length-1;if(t.children.length>1)u?this.createNewColumn(e).appendChild(this.selectedWindow):n[i].appendChild(this.selectedWindow);else if(!u){let s=n[i];this.selectedWindow.parentElement.remove(),s.appendChild(this.selectedWindow)}}moveSelectedWindowVertically(e){}selectWindowInColumn(e){let t=this.selectedWindow.parentElement,n=Array.from(t.children),i=n.indexOf(this.selectedWindow)+e;i<0&&(i=n.length+e),i>n.length-1&&(i=0),this.selectedWindow=n[i]}selectWindowInRow(e){let t=this.selectedWindow.parentElement,n=Array.from(this.children),i=n.indexOf(t)+e;i<0&&(i=n.length+e),i>n.length-1&&(i=0);let u=n[i].children[0];this.selectedWindow=u}createNewWindow(e){let t=e;return this.querySelector("window-column")||this.appendChild(document.createElement("window-column")),this.querySelector("window-column").appendChild(t),this.selectedWindow=t,t}connectedCallback(){this.createNewWindow(pt.new());let e=this.createNewWindow(dt.new("welcome.html"));e.classList.add("window-floating"),e.style.right="0px",e.style.bottom="0px",document.addEventListener("keydown",t=>{if(t.key=="ArrowDown"&&t.shiftKey&&t.altKey){this.moveSelectedWindowVertically(1);return}if(t.key=="ArrowDown"&&t.altKey){this.selectWindowInColumn(1);return}if(t.key=="ArrowUp"&&t.shiftKey&&t.altKey){this.moveSelectedWindowVertically(-1);return}if(t.key=="ArrowUp"&&t.ctrlKey){this.selectWindowInColumn(-1);return}if(t.key=="ArrowLeft"&&t.shiftKey&&t.altKey){this.moveSelectedWindowHorizontally(-1);return}if(t.key=="ArrowLeft"&&t.altKey){this.selectWindowInRow(-1);return}if(t.key=="ArrowRight"&&t.shiftKey&&t.altKey){this.moveSelectedWindowHorizontally(1);return}if(t.key=="ArrowRight"&&t.altKey){this.selectWindowInRow(1);return}if(t.key=="Enter"&&t.shiftKey&&t.altKey){this.createNewWindow(pt.new());return}if(t.key=="Q"&&t.altKey){this.selectedWindow.removeWindow(),this.selectedWindow=this.querySelector(".window-container");return}})}}customElements.define("window-manager",fa);document.querySelector("#app").innerHTML=`
  <main>
    <status-bar>
      <div class="branding-container">
        <img src="./src/img/monkey.svg" class="brand-logo">
        <p>aesthetic programming environment</p>
      </div>
      <status-indicator class="status-indicator">
        <i class="ti ti-database"></i>
        <p>1kB/10mB</p>
      </status-indicator>
    </status-bar>
    <window-manager>

    </window-manager>
  </main>
`;
