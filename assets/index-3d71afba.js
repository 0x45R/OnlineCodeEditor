(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();class me extends HTMLElement{constructor(){super()}get windowManager(){return this.parentElement.parentElement}set created(e){this.setAttribute("created",e)}get created(){return this.hasAttribute("created")?this.getAttribute("created")==="true":!1}set title(e){this.setAttribute("title",e)}get title(){return this.hasAttribute("title")||this.setAttribute("title","empty"),this.getAttribute("title")}set content(e){this._content=e}get content(){return this._content==null?"Empty":this._content}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".window-content").focus()}removeWindow(){this.parentElement&&(this.windowManager&&console.log(this.windowManager.selectedWindow),this.parentElement.children.length==1&&this.parentElement.remove(),this.remove())}connectedCallback(){this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">
          <i class="ti ti-x window-close-button"></i>
        </div>
      </div>
      <div class="window-content">
        ${this.content}
      </div>
    `,this.querySelector(".window-content").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.addEventListener("mouseover",()=>{this.customFocus()}),this.querySelector(".window-title").innerHTML=this.title}}customElements.define("custom-window",me);class gr extends me{constructor(){super()}get content(){return this._content==null?"Empty":this._content}set content(e){this._content=e,this.querySelector(".custom-text-editor").innerHTML=e}saveContent(){x.remove(this.file).then(()=>{x.write(this.file,this.content)}).then(()=>{Gr()}),console.log(this.file,this.content,"CONTENT")}set file(e){this._file=e}get file(){return this._file==null&&(this._file="new file"),this._file}static new(e){let r=document.createElement("code-editor");return r.file=e,console.log("E",x),x.read(e).then(n=>{console.log(n),r.content=n}),r}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".custom-text-editor").focus()}parseTextEditor(e){let r=e.target.value,n=r.split(`
`).length,i=this.querySelector(".custom-text-editor-columns");this.content=r,console.log(this.content,"CONTENT"),i.innerHTML="";for(let s=1;s<n+1;s++){let c=document.createElement("p");c.innerText=s,i.appendChild(c)}}connectedCallback(){this.title=`code editor - ${this.file}`,this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">          
          <i class="ti ti-player-play"></i>
          <i class="ti ti-device-floppy code-save-button"></i>
          <i class="ti ti-download code-download-button"></i>
          <i class="ti ti-x window-close-button"></i>
        </div>
      </div>
      <div class="window-content">
        <div class='custom-text-editor-columns'>1</div><textarea wrap='off' class='custom-text-editor' spellcheck='false'></textarea>
      </div>
    `,this.querySelector(".custom-text-editor").innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".custom-text-editor").addEventListener("input",e=>{this.parseTextEditor(e)}),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.querySelector(".code-save-button").addEventListener("click",()=>{this.saveContent()}),this.querySelector(".window-title").innerHTML=this.title,this.addEventListener("mouseover",()=>{this.customFocus()})}}customElements.define("code-editor",gr);class wr extends me{constructor(){super()}static new(e){let r=document.createElement("iframe-window");return r.file=e,x.read(e).then(n=>{console.log(n),r.content=n}),r}get content(){return this._content==null?"":this._content}set content(e){this._content=e;let r=this.querySelector(".iframe-window-content");r!=null&&(r.contentWindow.document.open(),r.contentWindow.document.write(e),r.contentWindow.document.close())}set file(e){this._file=e}get file(){return this._file==null&&(this._file="new file"),this._file}connectedCallback(){this.created=!0,this.title=`iframe - ${this.file}`,this.innerHTML=`
      <div class="window-titlebar">
        <p class="window-title">${this.title}</p>
        <div class="window-buttons">          
          <i class="ti ti-refresh window-refresh-button"></i>         
          <i class="ti ti-download code-download-button"></i>
          <i class="ti ti-x window-close-button"></i>
        </div>
      </div>
      <div class="window-content">
        <iframe wrap='off' class='iframe-window-content' spellcheck='false'></iframe>
      </div>
    `,this.content=this.content,this.classList.add("window-container"),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.querySelector(".window-refresh-button").addEventListener("click",()=>{x.read(this.file).then(e=>{console.log(e),this.content=e,this.connectedCallback()})}),this.querySelector(".window-title").innerHTML=this.title,this.addEventListener("mouseover",()=>{this.customFocus()})}}customElements.define("iframe-window",wr);function pn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Ct=Object.prototype.toString,Sr=function(e){var r=Ct.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ct.call(e.callee)==="[object Function]"),n},Ne,qt;function yn(){if(qt)return Ne;qt=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Sr,i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),c=i.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(d){var m=d.constructor;return m&&m.prototype===d},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!f["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{l(window[d])}catch{return!0}}catch{return!0}return!1}(),y=function(d){if(typeof window>"u"||!p)return l(d);try{return l(d)}catch{return!1}};t=function(m){var b=m!==null&&typeof m=="object",$=r.call(m)==="[object Function]",W=n(m),Q=b&&r.call(m)==="[object String]",R=[];if(!b&&!$&&!W)throw new TypeError("Object.keys called on a non-object");var I=c&&$;if(Q&&m.length>0&&!e.call(m,0))for(var P=0;P<m.length;++P)R.push(String(P));if(W&&m.length>0)for(var C=0;C<m.length;++C)R.push(String(C));else for(var j in m)!(I&&j==="prototype")&&e.call(m,j)&&R.push(String(j));if(s)for(var re=y(m),A=0;A<u.length;++A)!(re&&u[A]==="constructor")&&e.call(m,u[A])&&R.push(u[A]);return R}}return Ne=t,Ne}var dn=Array.prototype.slice,mn=Sr,Ft=Object.keys,ae=Ft?function(e){return Ft(e)}:yn(),Lt=Object.keys;ae.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return mn(n)?Lt(dn.call(n)):Lt(n)})}else Object.keys=ae;return Object.keys||ae};var hn=ae,br=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==i||c.enumerable!==!0)return!1}return!0},Dt=typeof Symbol<"u"&&Symbol,vn=br,Pr=function(){return typeof Dt!="function"||typeof Symbol!="function"||typeof Dt("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:vn()},gn="Function.prototype.bind called on incompatible ",We=Array.prototype.slice,wn=Object.prototype.toString,Sn="[object Function]",bn=function(e){var r=this;if(typeof r!="function"||wn.call(r)!==Sn)throw new TypeError(gn+r);for(var n=We.call(arguments,1),i,s=function(){if(this instanceof i){var p=r.apply(this,n.concat(We.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(We.call(arguments)))},c=Math.max(0,r.length-n.length),u=[],l=0;l<c;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i},Pn=bn,yt=Function.prototype.bind||Pn,An=yt,Ar=An.call(Function.call,Object.prototype.hasOwnProperty),v,Y=SyntaxError,Er=Function,V=TypeError,_e=function(t){try{return Er('"use strict"; return ('+t+").constructor;")()}catch{}},k=Object.getOwnPropertyDescriptor;if(k)try{k({},"")}catch{k=null}var Ce=function(){throw new V},En=k?function(){try{return arguments.callee,Ce}catch{try{return k(arguments,"callee").get}catch{return Ce}}}():Ce,K=Pr(),_=Object.getPrototypeOf||function(t){return t.__proto__},z={},On=typeof Uint8Array>"u"?v:_(Uint8Array),B={"%AggregateError%":typeof AggregateError>"u"?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?v:ArrayBuffer,"%ArrayIteratorPrototype%":K?_([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?v:Atomics,"%BigInt%":typeof BigInt>"u"?v:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?v:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?v:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?v:Float32Array,"%Float64Array%":typeof Float64Array>"u"?v:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?v:FinalizationRegistry,"%Function%":Er,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?v:Int8Array,"%Int16Array%":typeof Int16Array>"u"?v:Int16Array,"%Int32Array%":typeof Int32Array>"u"?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":K?_(_([][Symbol.iterator]())):v,"%JSON%":typeof JSON=="object"?JSON:v,"%Map%":typeof Map>"u"?v:Map,"%MapIteratorPrototype%":typeof Map>"u"||!K?v:_(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?v:Promise,"%Proxy%":typeof Proxy>"u"?v:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?v:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?v:Set,"%SetIteratorPrototype%":typeof Set>"u"||!K?v:_(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":K?_(""[Symbol.iterator]()):v,"%Symbol%":K?Symbol:v,"%SyntaxError%":Y,"%ThrowTypeError%":En,"%TypedArray%":On,"%TypeError%":V,"%Uint8Array%":typeof Uint8Array>"u"?v:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?v:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?v:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?v:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?v:WeakMap,"%WeakRef%":typeof WeakRef>"u"?v:WeakRef,"%WeakSet%":typeof WeakSet>"u"?v:WeakSet};try{null.error}catch(t){var In=_(_(t));B["%Error.prototype%"]=In}var xn=function t(e){var r;if(e==="%AsyncFunction%")r=_e("async function () {}");else if(e==="%GeneratorFunction%")r=_e("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=_e("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=_(i.prototype))}return B[e]=r,r},Mt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},te=yt,ce=Ar,$n=te.call(Function.call,Array.prototype.concat),Tn=te.call(Function.apply,Array.prototype.splice),kt=te.call(Function.call,String.prototype.replace),le=te.call(Function.call,String.prototype.slice),Rn=te.call(Function.call,RegExp.prototype.exec),Nn=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wn=/\\(\\)?/g,_n=function(e){var r=le(e,0,1),n=le(e,-1);if(r==="%"&&n!=="%")throw new Y("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Y("invalid intrinsic syntax, expected opening `%`");var i=[];return kt(e,Nn,function(s,c,u,l){i[i.length]=u?kt(l,Wn,"$1"):c||s}),i},Cn=function(e,r){var n=e,i;if(ce(Mt,n)&&(i=Mt[n],n="%"+i[0]+"%"),ce(B,n)){var s=B[n];if(s===z&&(s=xn(n)),typeof s>"u"&&!r)throw new V("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Y("intrinsic "+e+" does not exist!")},O=function(e,r){if(typeof e!="string"||e.length===0)throw new V("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new V('"allowMissing" argument must be a boolean');if(Rn(/^%?[^%]*%?$/,e)===null)throw new Y("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=_n(e),i=n.length>0?n[0]:"",s=Cn("%"+i+"%",r),c=s.name,u=s.value,l=!1,f=s.alias;f&&(i=f[0],Tn(n,$n([0,1],f)));for(var p=1,y=!0;p<n.length;p+=1){var d=n[p],m=le(d,0,1),b=le(d,-1);if((m==='"'||m==="'"||m==="`"||b==='"'||b==="'"||b==="`")&&m!==b)throw new Y("property names with quotes must have matching quotes");if((d==="constructor"||!y)&&(l=!0),i+="."+d,c="%"+i+"%",ce(B,c))u=B[c];else if(u!=null){if(!(d in u)){if(!r)throw new V("base intrinsic for "+e+" exists, but the property is not available.");return}if(k&&p+1>=n.length){var $=k(u,d);y=!!$,y&&"get"in $&&!("originalValue"in $.get)?u=$.get:u=u[d]}else y=ce(u,d),u=u[d];y&&!l&&(B[c]=u)}}return u},qn=O,at=qn("%Object.defineProperty%",!0),ut=function(){if(at)try{return at({},"a",{value:1}),!0}catch{return!1}return!1};ut.hasArrayLengthDefineBug=function(){if(!ut())return null;try{return at([],"length",{value:1}).length!==1}catch{return!0}};var Fn=ut,Ln=hn,Dn=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Mn=Object.prototype.toString,kn=Array.prototype.concat,Or=Object.defineProperty,Bn=function(t){return typeof t=="function"&&Mn.call(t)==="[object Function]"},jn=Fn(),Ir=Or&&jn,Gn=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Bn(n)||!n())return}Ir?Or(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r},xr=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Ln(e);Dn&&(n=kn.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Gn(t,n[i],e[n[i]],r[n[i]])};xr.supportsDescriptors=!!Ir;var $r=xr,fe={},Un={get exports(){return fe},set exports(t){fe=t}},Hn=O,Kn=Hn("%TypeError%"),zn=function(e,r){if(e==null)throw new Kn(r||"Cannot call method on "+e);return e};(function(t){t.exports=zn})(Un);var pe={},Jn={get exports(){return pe},set exports(t){pe=t}};(function(t){var e=yt,r=O,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(i,n),c=r("%Object.getOwnPropertyDescriptor%",!0),u=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}t.exports=function(y){var d=s(e,i,arguments);if(c&&u){var m=c(d,"length");m.configurable&&u(d,"length",{value:1+l(0,y.length-(arguments.length-1))})}return d};var f=function(){return s(e,n,arguments)};u?u(t.exports,"apply",{value:f}):t.exports.apply=f})(Jn);var Tr=O,Rr=pe,Vn=Rr(Tr("String.prototype.indexOf")),X=function(e,r){var n=Tr(e,!!r);return typeof n=="function"&&Vn(e,".prototype.")>-1?Rr(n):n},ye={},Yn={get exports(){return ye},set exports(t){ye=t}},qe,Bt;function Xn(){if(Bt)return qe;Bt=1;var t=O,e=t("%Array%"),r=!e.isArray&&X("Object.prototype.toString");return qe=e.isArray||function(i){return r(i)==="[object Array]"},qe}var jt;function Qn(){return jt||(jt=1,function(t){t.exports=Xn()}(Yn)),ye}var Nr=O,Zn=X,ei=Nr("%TypeError%"),ti=Qn(),ri=Nr("%Reflect.apply%",!0)||Zn("%Function.prototype.apply%"),ni=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!ti(n))throw new ei("Assertion failed: optional `argumentsList`, if provided, must be a List");return ri(e,r,n)};const ii={},oi=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"})),ai=pn(oi);var Fe,Gt;function ui(){if(Gt)return Fe;Gt=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=i&&s&&typeof s.get=="function"?s.get:null,u=i&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,f=l?WeakMap.prototype.has:null,p=typeof WeakSet=="function"&&WeakSet.prototype,y=p?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,$=Object.prototype.toString,W=Function.prototype.toString,Q=String.prototype.match,R=String.prototype.slice,I=String.prototype.replace,P=String.prototype.toUpperCase,C=String.prototype.toLowerCase,j=RegExp.prototype.test,re=Array.prototype.concat,A=Array.prototype.join,Ur=Array.prototype.slice,dt=Math.floor,ve=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ge=Object.getOwnPropertySymbols,we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,G=typeof Symbol=="function"&&typeof Symbol.iterator=="object",E=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===G||"symbol")?Symbol.toStringTag:null,mt=Object.prototype.propertyIsEnumerable,ht=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(o){return o.__proto__}:null);function vt(o,a){if(o===1/0||o===-1/0||o!==o||o&&o>-1e3&&o<1e3||j.call(/e/,a))return a;var g=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof o=="number"){var w=o<0?-dt(-o):dt(o);if(w!==o){var S=String(w),h=R.call(a,S.length+1);return I.call(S,g,"$&_")+"."+I.call(I.call(h,/([0-9]{3})/g,"$&_"),/_$/,"")}}return I.call(a,g,"$&_")}var Se=ai,gt=Se.custom,wt=Pt(gt)?gt:null;Fe=function o(a,g,w,S){var h=g||{};if(q(h,"quoteStyle")&&h.quoteStyle!=="single"&&h.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(h,"maxStringLength")&&(typeof h.maxStringLength=="number"?h.maxStringLength<0&&h.maxStringLength!==1/0:h.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var L=q(h,"customInspect")?h.customInspect:!0;if(typeof L!="boolean"&&L!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(h,"indent")&&h.indent!==null&&h.indent!=="	"&&!(parseInt(h.indent,10)===h.indent&&h.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(h,"numericSeparator")&&typeof h.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var M=h.numericSeparator;if(typeof a>"u")return"undefined";if(a===null)return"null";if(typeof a=="boolean")return a?"true":"false";if(typeof a=="string")return Et(a,h);if(typeof a=="number"){if(a===0)return 1/0/a>0?"0":"-0";var T=String(a);return M?vt(a,T):T}if(typeof a=="bigint"){var D=String(a)+"n";return M?vt(a,D):D}var Ee=typeof h.depth>"u"?5:h.depth;if(typeof w>"u"&&(w=0),w>=Ee&&Ee>0&&typeof a=="object")return be(a)?"[Array]":"[Object]";var U=cn(h,w);if(typeof S>"u")S=[];else if(At(S,a)>=0)return"[Circular]";function N(H,oe,fn){if(oe&&(S=Ur.call(S),S.push(oe)),fn){var _t={depth:h.depth};return q(h,"quoteStyle")&&(_t.quoteStyle=h.quoteStyle),o(H,_t,w+1,S)}return o(H,h,w+1,S)}if(typeof a=="function"&&!bt(a)){var It=Zr(a),xt=ne(a,N);return"[Function"+(It?": "+It:" (anonymous)")+"]"+(xt.length>0?" { "+A.call(xt,", ")+" }":"")}if(Pt(a)){var $t=G?I.call(String(a),/^(Symbol\(.*\))_[^)]*$/,"$1"):we.call(a);return typeof a=="object"&&!G?Z($t):$t}if(an(a)){for(var ee="<"+C.call(String(a.nodeName)),Oe=a.attributes||[],ie=0;ie<Oe.length;ie++)ee+=" "+Oe[ie].name+"="+St(Hr(Oe[ie].value),"double",h);return ee+=">",a.childNodes&&a.childNodes.length&&(ee+="..."),ee+="</"+C.call(String(a.nodeName))+">",ee}if(be(a)){if(a.length===0)return"[]";var Ie=ne(a,N);return U&&!sn(Ie)?"["+Ae(Ie,U)+"]":"[ "+A.call(Ie,", ")+" ]"}if(zr(a)){var xe=ne(a,N);return!("cause"in Error.prototype)&&"cause"in a&&!mt.call(a,"cause")?"{ ["+String(a)+"] "+A.call(re.call("[cause]: "+N(a.cause),xe),", ")+" }":xe.length===0?"["+String(a)+"]":"{ ["+String(a)+"] "+A.call(xe,", ")+" }"}if(typeof a=="object"&&L){if(wt&&typeof a[wt]=="function"&&Se)return Se(a,{depth:Ee-w});if(L!=="symbol"&&typeof a.inspect=="function")return a.inspect()}if(en(a)){var Tt=[];return n&&n.call(a,function(H,oe){Tt.push(N(oe,a,!0)+" => "+N(H,a))}),Ot("Map",r.call(a),Tt,U)}if(nn(a)){var Rt=[];return u&&u.call(a,function(H){Rt.push(N(H,a))}),Ot("Set",c.call(a),Rt,U)}if(tn(a))return Pe("WeakMap");if(on(a))return Pe("WeakSet");if(rn(a))return Pe("WeakRef");if(Vr(a))return Z(N(Number(a)));if(Xr(a))return Z(N(ve.call(a)));if(Yr(a))return Z(b.call(a));if(Jr(a))return Z(N(String(a)));if(!Kr(a)&&!bt(a)){var $e=ne(a,N),Nt=ht?ht(a)===Object.prototype:a instanceof Object||a.constructor===Object,Te=a instanceof Object?"":"null prototype",Wt=!Nt&&E&&Object(a)===a&&E in a?R.call(F(a),8,-1):Te?"Object":"",ln=Nt||typeof a.constructor!="function"?"":a.constructor.name?a.constructor.name+" ":"",Re=ln+(Wt||Te?"["+A.call(re.call([],Wt||[],Te||[]),": ")+"] ":"");return $e.length===0?Re+"{}":U?Re+"{"+Ae($e,U)+"}":Re+"{ "+A.call($e,", ")+" }"}return String(a)};function St(o,a,g){var w=(g.quoteStyle||a)==="double"?'"':"'";return w+o+w}function Hr(o){return I.call(String(o),/"/g,"&quot;")}function be(o){return F(o)==="[object Array]"&&(!E||!(typeof o=="object"&&E in o))}function Kr(o){return F(o)==="[object Date]"&&(!E||!(typeof o=="object"&&E in o))}function bt(o){return F(o)==="[object RegExp]"&&(!E||!(typeof o=="object"&&E in o))}function zr(o){return F(o)==="[object Error]"&&(!E||!(typeof o=="object"&&E in o))}function Jr(o){return F(o)==="[object String]"&&(!E||!(typeof o=="object"&&E in o))}function Vr(o){return F(o)==="[object Number]"&&(!E||!(typeof o=="object"&&E in o))}function Yr(o){return F(o)==="[object Boolean]"&&(!E||!(typeof o=="object"&&E in o))}function Pt(o){if(G)return o&&typeof o=="object"&&o instanceof Symbol;if(typeof o=="symbol")return!0;if(!o||typeof o!="object"||!we)return!1;try{return we.call(o),!0}catch{}return!1}function Xr(o){if(!o||typeof o!="object"||!ve)return!1;try{return ve.call(o),!0}catch{}return!1}var Qr=Object.prototype.hasOwnProperty||function(o){return o in this};function q(o,a){return Qr.call(o,a)}function F(o){return $.call(o)}function Zr(o){if(o.name)return o.name;var a=Q.call(W.call(o),/^function\s*([\w$]+)/);return a?a[1]:null}function At(o,a){if(o.indexOf)return o.indexOf(a);for(var g=0,w=o.length;g<w;g++)if(o[g]===a)return g;return-1}function en(o){if(!r||!o||typeof o!="object")return!1;try{r.call(o);try{c.call(o)}catch{return!0}return o instanceof Map}catch{}return!1}function tn(o){if(!f||!o||typeof o!="object")return!1;try{f.call(o,f);try{y.call(o,y)}catch{return!0}return o instanceof WeakMap}catch{}return!1}function rn(o){if(!m||!o||typeof o!="object")return!1;try{return m.call(o),!0}catch{}return!1}function nn(o){if(!c||!o||typeof o!="object")return!1;try{c.call(o);try{r.call(o)}catch{return!0}return o instanceof Set}catch{}return!1}function on(o){if(!y||!o||typeof o!="object")return!1;try{y.call(o,y);try{f.call(o,f)}catch{return!0}return o instanceof WeakSet}catch{}return!1}function an(o){return!o||typeof o!="object"?!1:typeof HTMLElement<"u"&&o instanceof HTMLElement?!0:typeof o.nodeName=="string"&&typeof o.getAttribute=="function"}function Et(o,a){if(o.length>a.maxStringLength){var g=o.length-a.maxStringLength,w="... "+g+" more character"+(g>1?"s":"");return Et(R.call(o,0,a.maxStringLength),a)+w}var S=I.call(I.call(o,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,un);return St(S,"single",a)}function un(o){var a=o.charCodeAt(0),g={8:"b",9:"t",10:"n",12:"f",13:"r"}[a];return g?"\\"+g:"\\x"+(a<16?"0":"")+P.call(a.toString(16))}function Z(o){return"Object("+o+")"}function Pe(o){return o+" { ? }"}function Ot(o,a,g,w){var S=w?Ae(g,w):A.call(g,", ");return o+" ("+a+") {"+S+"}"}function sn(o){for(var a=0;a<o.length;a++)if(At(o[a],`
`)>=0)return!1;return!0}function cn(o,a){var g;if(o.indent==="	")g="	";else if(typeof o.indent=="number"&&o.indent>0)g=A.call(Array(o.indent+1)," ");else return null;return{base:g,prev:A.call(Array(a+1),g)}}function Ae(o,a){if(o.length===0)return"";var g=`
`+a.prev+a.base;return g+A.call(o,","+g)+`
`+a.prev}function ne(o,a){var g=be(o),w=[];if(g){w.length=o.length;for(var S=0;S<o.length;S++)w[S]=q(o,S)?a(o[S],o):""}var h=typeof ge=="function"?ge(o):[],L;if(G){L={};for(var M=0;M<h.length;M++)L["$"+h[M]]=h[M]}for(var T in o)q(o,T)&&(g&&String(Number(T))===T&&T<o.length||G&&L["$"+T]instanceof Symbol||(j.call(/[^\w$]/,T)?w.push(a(T,o)+": "+a(o[T],o)):w.push(T+": "+a(o[T],o))));if(typeof ge=="function")for(var D=0;D<h.length;D++)mt.call(o,h[D])&&w.push("["+a(h[D])+"]: "+a(o[h[D]],o));return w}return Fe}var Le,Ut;function si(){return Ut||(Ut=1,Le=function(e){return typeof e=="string"||typeof e=="symbol"}),Le}var De,Ht;function ci(){return Ht||(Ht=1,De=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}),De}var Me,Kt;function he(){if(Kt)return Me;Kt=1;var t=ci();return Me=function(r){return typeof r=="symbol"?"Symbol":typeof r=="bigint"?"BigInt":t(r)},Me}var li=O,zt=li("%TypeError%"),fi=ui(),pi=si(),yi=he(),Wr=function(e,r){if(yi(e)!=="Object")throw new zt("Assertion failed: Type(O) is not Object");if(!pi(r))throw new zt("Assertion failed: IsPropertyKey(P) is not true, got "+fi(r));return e[r]},st={},di={get exports(){return st},set exports(t){st=t}},_r=Function.prototype.toString,J=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,ct,ue;if(typeof J=="function"&&typeof Object.defineProperty=="function")try{ct=Object.defineProperty({},"length",{get:function(){throw ue}}),ue={},J(function(){throw 42},null,ct)}catch(t){t!==ue&&(J=null)}else J=null;var mi=/^\s*class\b/,lt=function(e){try{var r=_r.call(e);return mi.test(r)}catch{return!1}},ke=function(e){try{return lt(e)?!1:(_r.call(e),!0)}catch{return!1}},se=Object.prototype.toString,hi="[object Object]",vi="[object Function]",gi="[object GeneratorFunction]",wi="[object HTMLAllCollection]",Si="[object HTML document.all class]",bi="[object HTMLCollection]",Pi=typeof Symbol=="function"&&!!Symbol.toStringTag,Ai=!(0 in[,]),ft=function(){return!1};if(typeof document=="object"){var Ei=document.all;se.call(Ei)===se.call(document.all)&&(ft=function(e){if((Ai||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=se.call(e);return(r===wi||r===Si||r===bi||r===hi)&&e("")==null}catch{}return!1})}var Cr=J?function(e){if(ft(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{J(e,null,ct)}catch(r){if(r!==ue)return!1}return!lt(e)&&ke(e)}:function(e){if(ft(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Pi)return ke(e);if(lt(e))return!1;var r=se.call(e);return r!==vi&&r!==gi&&!/^\[object HTML/.test(r)?!1:ke(e)};(function(t){t.exports=Cr})(di);var Be,Jt;function Oi(){if(Jt)return Be;Jt=1;var t=O,e=t("%Math%"),r=t("%Number%");return Be=r.MAX_SAFE_INTEGER||e.pow(2,53)-1,Be}var je,Vt;function Ii(){if(Vt)return je;Vt=1;var t=O,e=t("%Math.abs%");return je=function(n){return e(n)},je}var Ge,Yt;function xi(){if(Yt)return Ge;Yt=1;var t=he(),e=Math.floor;return Ge=function(n){return t(n)==="BigInt"?n:e(n)},Ge}var Ue,Xt;function $i(){return Xt||(Xt=1,Ue=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),Ue}var He,Qt;function Ti(){return Qt||(Qt=1,He=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),He}var Ke,Zt;function qr(){if(Zt)return Ke;Zt=1;var t=br;return Ke=function(){return t()&&!!Symbol.toStringTag},Ke}var ze,er;function Ri(){if(er)return ze;er=1;var t=Date.prototype.getDay,e=function(c){try{return t.call(c),!0}catch{return!1}},r=Object.prototype.toString,n="[object Date]",i=qr()();return ze=function(c){return typeof c!="object"||c===null?!1:i?e(c):r.call(c)===n},ze}var de={},tr={get exports(){return de},set exports(t){de=t}},rr;function Ni(){if(rr)return de;rr=1;var t=Object.prototype.toString,e=Pr();if(e){var r=Symbol.prototype.toString,n=/^Symbol\(.*\)$/,i=function(c){return typeof c.valueOf()!="symbol"?!1:n.test(r.call(c))};tr.exports=function(c){if(typeof c=="symbol")return!0;if(t.call(c)!=="[object Symbol]")return!1;try{return i(c)}catch{return!1}}}else tr.exports=function(c){return!1};return de}var Je,nr;function Wi(){if(nr)return Je;nr=1;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",e=Ti(),r=Cr,n=Ri(),i=Ni(),s=function(l,f){if(typeof l>"u"||l===null)throw new TypeError("Cannot call method on "+l);if(typeof f!="string"||f!=="number"&&f!=="string")throw new TypeError('hint must be "string" or "number"');var p=f==="string"?["toString","valueOf"]:["valueOf","toString"],y,d,m;for(m=0;m<p.length;++m)if(y=l[p[m]],r(y)&&(d=y.call(l),e(d)))return d;throw new TypeError("No default value")},c=function(l,f){var p=l[f];if(p!==null&&typeof p<"u"){if(!r(p))throw new TypeError(p+" returned for property "+f+" of object "+l+" is not a function");return p}};return Je=function(l){if(e(l))return l;var f="default";arguments.length>1&&(arguments[1]===String?f="string":arguments[1]===Number&&(f="number"));var p;if(t&&(Symbol.toPrimitive?p=c(l,Symbol.toPrimitive):i(l)&&(p=Symbol.prototype.valueOf)),typeof p<"u"){var y=p.call(l,f);if(e(y))return y;throw new TypeError("unable to convert exotic object to primitive")}return f==="default"&&(n(l)||i(l))&&(f="string"),s(l,f==="default"?"number":f)},Je}var Ve,ir;function _i(){if(ir)return Ve;ir=1;var t=Wi();return Ve=function(r){return arguments.length>1?t(r,arguments[1]):t(r)},Ve}var Ye,or;function Ci(){if(or)return Ye;or=1;var t=X,e=qr()(),r,n,i,s;if(e){r=t("Object.prototype.hasOwnProperty"),n=t("RegExp.prototype.exec"),i={};var c=function(){throw i};s={toString:c,valueOf:c},typeof Symbol.toPrimitive=="symbol"&&(s[Symbol.toPrimitive]=c)}var u=t("Object.prototype.toString"),l=Object.getOwnPropertyDescriptor,f="[object RegExp]";return Ye=e?function(y){if(!y||typeof y!="object")return!1;var d=l(y,"lastIndex"),m=d&&r(d,"value");if(!m)return!1;try{n(y,s)}catch(b){return b===i}}:function(y){return!y||typeof y!="object"&&typeof y!="function"?!1:u(y)===f},Ye}var Xe,ar;function qi(){if(ar)return Xe;ar=1;var t=X,e=O,r=Ci(),n=t("RegExp.prototype.exec"),i=e("%TypeError%");return Xe=function(c){if(!r(c))throw new i("`regex` must be a RegExp");return function(l){return n(c,l)!==null}},Xe}var Qe,ur;function Fi(){if(ur)return Qe;ur=1;var t=O,e=t("%Number%"),r=t("%RegExp%"),n=t("%TypeError%"),i=t("%parseInt%"),s=X,c=qi(),u=s("String.prototype.slice"),l=c(/^0b[01]+$/i),f=c(/^0o[0-7]+$/i),p=c(/^[-+]0x[0-9a-f]+$/i),y=["","​","￾"].join(""),d=new r("["+y+"]","g"),m=c(d),b=[`	
\v\f\r   ᠎    `,"         　\u2028","\u2029\uFEFF"].join(""),$=new RegExp("(^["+b+"]+)|(["+b+"]+$)","g"),W=s("String.prototype.replace"),Q=function(I){return W(I,$,"")},R=he();return Qe=function I(P){if(R(P)!=="String")throw new n("Assertion failed: `argument` is not a String");if(l(P))return e(i(u(P,2),2));if(f(P))return e(i(u(P,2),8));if(m(P)||p(P))return NaN;var C=Q(P);return C!==P?I(C):e(P)},Qe}var Ze,sr;function Li(){if(sr)return Ze;sr=1;var t=O,e=t("%TypeError%"),r=t("%Number%"),n=$i(),i=_i(),s=Fi();return Ze=function(u){var l=n(u)?u:i(u,r);if(typeof l=="symbol")throw new e("Cannot convert a Symbol value to a number");if(typeof l=="bigint")throw new e("Conversion from 'BigInt' to 'number' is not allowed.");return typeof l=="string"?s(l):r(l)},Ze}var et,cr;function Fr(){return cr||(cr=1,et=Number.isNaN||function(e){return e!==e}),et}var tt,lr;function Di(){if(lr)return tt;lr=1;var t=Fr();return tt=function(e){return(typeof e=="number"||typeof e=="bigint")&&!t(e)&&e!==1/0&&e!==-1/0},tt}var rt,fr;function Mi(){return fr||(fr=1,rt=function(e){return e>=0?1:-1}),rt}var nt,pr;function ki(){if(pr)return nt;pr=1;var t=Ii(),e=xi(),r=Li(),n=Fr(),i=Di(),s=Mi();return nt=function(u){var l=r(u);if(n(l)||l===0)return 0;if(!i(l))return l;var f=e(t(l));return f===0?0:s(l)*f},nt}var it,yr;function Bi(){if(yr)return it;yr=1;var t=Oi(),e=ki();return it=function(n){var i=e(n);return i<=0?0:i>t?t:i},it}var ji=O,Gi=ji("%TypeError%"),Ui=Wr,Hi=Bi(),Ki=he(),zi=function(e){if(Ki(e)!=="Object")throw new Gi("Assertion failed: `obj` must be an Object");return Hi(Ui(e,"length"))},Ji=function(e){return!!e},Vi=O,Yi=Vi("%Object%"),Xi=fe,Qi=function(e){return Xi(e),Yi(e)},Lr=O,Zi=Lr("%String%"),eo=Lr("%TypeError%"),to=function(e){if(typeof e=="symbol")throw new eo("Cannot convert a Symbol value to a string");return Zi(e)},ro=ni,no=Wr,io=st,oo=zi,ao=Ji,uo=Qi,so=to,Dr=function(e){var r=uo(this),n=oo(r);if(!io(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:void 0,s=0;s<n;){var c=so(s),u=no(r,c),l=ao(ro(e,i,[u,s,r]));if(l)return s;s+=1}return-1},co=Dr,Mr=function(){var e=Array.prototype.findIndex&&[,1].findIndex(function(r,n){return n===0})===0;return e?Array.prototype.findIndex:co},lo=Ar,kr=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",fo=kr&&Array.prototype[Symbol.unscopables],dr=TypeError,po=function(e){if(typeof e!="string"||!e)throw new dr("method must be a non-empty string");if(!lo(Array.prototype,e))throw new dr("method must be on Array.prototype");kr&&(fo[e]=!0)},yo=$r,mo=po,ho=Mr,vo=function(){var e=ho();return yo(Array.prototype,{findIndex:e},{findIndex:function(){return Array.prototype.findIndex!==e}}),mo("findIndex"),e},go=$r,wo=fe,So=pe,bo=X,Po=Dr,Br=Mr,Ao=vo,Eo=bo("Array.prototype.slice"),Oo=So.apply(Br()),Io=function(e,r){wo(e);var n=Eo(arguments,1);return Oo(e,n)};go(Io,{getPolyfill:Br,implementation:Po,shim:Ao});/*! http://mths.be/startswith v0.2.0 by @mathias */String.prototype.startsWith||function(){var t=function(){try{var n={},i=Object.defineProperty,s=i(n,n,n)&&i}catch{}return s}(),e={}.toString,r=function(n){if(this==null)throw TypeError();var i=String(this);if(n&&e.call(n)=="[object RegExp]")throw TypeError();var s=i.length,c=String(n),u=c.length,l=arguments.length>1?arguments[1]:void 0,f=l?Number(l):0;f!=f&&(f=0);var p=Math.min(Math.max(f,0),s);if(u+p>s)return!1;for(var y=-1;++y<u;)if(i.charCodeAt(p+y)!=c.charCodeAt(y))return!1;return!0};t?t(String.prototype,"startsWith",{value:r,configurable:!0,writable:!0}):String.prototype.startsWith=r}();/*! https://mths.be/includes v0.2.0 by @mathias */String.prototype.includes||function(){var t={}.toString,e=function(){try{var i={},s=Object.defineProperty,c=s(i,i,i)&&s}catch{}return c}(),r="".indexOf,n=function(i){if(this==null)throw TypeError();var s=String(this);if(i&&t.call(i)=="[object RegExp]")throw TypeError();var c=s.length,u=String(i),l=u.length,f=arguments.length>1?arguments[1]:void 0,p=f?Number(f):0;p!=p&&(p=0);var y=Math.min(Math.max(p,0),c);return l+y>c?!1:r.call(s,u,p)!=-1};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}();/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var t=function(){try{var r={},n=Object.defineProperty,i=n(r,r,r)&&n}catch{}return i}(),e=function(r){if(this==null)throw TypeError();var n=String(this),i=r?Number(r):0;if(i!=i&&(i=0),i<0||i==1/0)throw RangeError();for(var s="";i;)i%2==1&&(s+=n),i>1&&(n+=n),i>>=1;return s};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}();function xo(t,e){return e.map(function(r,n){var i=n+1,s=i.toString().length,c=" ".repeat(t-s);return c+i+"  "+r})}var jr=xo,$o=jr,To=6,Ro="-n";function No(t,e){var r=0,n=e.findIndex(function(s){return s===Ro}),i=n!==-1;i&&e.splice(n,1),Promise.all(e.map(function(s){return t.system.read(s).then(null,function(c){return r=1,"cat: "+c})})).then(function(s){return i?$o(To,s):s}).then(function(s){t.output(s.join(`
`)),t.exit(r)})}var Wo=No;function _o(t,e){var r=e[0]||"/home/"+t.system.state.user;t.system.changeDir(r).then(t.exit,function(n){t.error(n),t.exit(1)})}var Co=_o,mr="SINGLE_COPY";function qo(t,e){var r=e.findIndex(function(u){return u==="-r"||u==="-R"}),n=r!==-1;if(n&&e.splice(r,1),!e.length){t.error("cp: missing file operand"),t.exit(1);return}if(e.length===1){t.error("cp: missing destination file operand after ‘"+e[0]+"’"),t.exit(1);return}var i=e[e.length-1],s=e.slice(0,-1);function c(u,l){return t.system.stat(u).then(function(f){return f.type==="dir"&&!n?Promise.reject("cp: omitting directory ‘"+u+"’"):t.system.copy(u,l)})}t.system.stat(i).then(function(u){if(u.type!=="dir")return Promise.reject()}).catch(function(){return s.length!==1?Promise.reject("cp: target ‘"+i+"’ is not a directory"):mr}).then(function(u){return u===mr?c(s[0],i):Promise.all(s.map(function(l){var f=l.split("/"),p=f[f.length-1],y=i+"/"+p;return c(l,y)}))}).then(function(){t.exit(0)}).catch(function(u){t.error(u),t.exit(1)})}var Fo=qo,Lo=jr,Do=5;function Mo(t){t.system.getHistory().then(function(e){t.output(Lo(Do,e).join(`
`)),t.exit()})}var ko=Mo,Bo=`
The output here is limited.
On a real system you would also see file permissions, user, group, block size and more.`;function jo(t,e){var r=e.findIndex(function(p){return p==="-a"}),n=r!==-1;n&&e.splice(r,1);var i=e.findIndex(function(p){return p==="-l"}),s=i!==-1;s&&e.splice(i,1);var c=e.findIndex(function(p){return p==="-la"});c!==-1&&(n=!0,s=!0,e.splice(c,1));var u=e.findIndex(function(p){return p==="-al"});u!==-1&&(n=!0,s=!0,e.splice(u,1)),e.length||e.push(".");function l(p){return n?p:p.filter(function(y){return y[0]!=="."})}function f(p,y){return s?Promise.all(y.map(function(d){return t.system.stat(p+"/"+d).then(function(m){var b=new Date(m.modified),$=b.toDateString().slice(4,10)+" "+b.toTimeString().slice(0,5),W=m.type;return W==="dir"&&(W+=" "),W+"  "+$+"  "+m.name})})).then(function(d){return"total "+d.length+`
`+d.join(`
`)+Bo}):Promise.resolve(y.join(" "))}Promise.all(e.sort().map(function(p){return t.system.readDir(p).then(l).then(function(y){return f(p,y)}).then(function(y){return e.length===1?y:p+`:
`+y})})).then(function(p){return p.join(`

`)}).then(function(p){t.output(p),t.exit()},function(p){t.output("ls: "+p),t.exit(2)})}var Go=jo;function Uo(t,e){if(!e.length){t.error("mkdir: missing operand"),t.exit(1);return}Promise.all(e.map(function(r){return t.system.createDir(r)})).then(function(){t.exit()},function(r){t.error(r),t.exit(1)})}var Ho=Uo,hr="SINGLE_COPY";function Ko(t,e){var r=e.findIndex(function(u){return u==="-n"}),n=r!==-1;if(n&&e.splice(r,1),!e.length){t.error("mv: missing file operand"),t.exit(1);return}if(e.length===1){t.error("mv: missing destination file operand after ‘"+e[0]+"’"),t.exit(1);return}var i=e[e.length-1],s=e.slice(0,-1);function c(u,l){return n?t.system.stat(l).catch(function(){return t.system.copy(u,l).then(function(){return t.system.remove(u)})}):t.system.copy(u,l).then(function(){return t.system.remove(u)})}t.system.stat(i).then(function(u){if(u.type!=="dir")return Promise.reject()}).catch(function(){return s.length!==1?Promise.reject("mv: target ‘"+i+"’ is not a directory"):hr}).then(function(u){return u===hr?c(s[0],i):Promise.all(s.map(function(l){var f=l.split("/"),p=f[f.length-1],y=i+"/"+p;return c(l,y)}))}).then(function(){t.exit(0)}).catch(function(u){t.error(u),t.exit(1)})}var zo=Ko;function Jo(t,e){t.system.getDir().then(function(r){t.output(r),t.exit()})}var Vo=Jo;function Yo(t,e){var r=e.findIndex(function(i){return i.toLowerCase()==="-r"}),n=r!==-1;if(n&&e.splice(r,1),!e.length){t.error("rm: missing operand"),t.exit(1);return}Promise.all(e.map(function(i){return t.system.stat(i).then(function(s){var c=s.type==="dir";if(c&&!n)return Promise.reject("rm: cannot remove ‘"+i+"’: Is a directory")},function(){}).then(function(){return t.system.remove(i)})})).then(function(){t.exit()},function(i){t.error(i),t.exit(1)})}var Xo=Yo;function Qo(t,e){if(!e.length){t.error("rmdir: missing operand"),t.exit(1);return}Promise.all(e.map(function(r){return t.system.stat(r).then(function(n){if(n.type!=="dir")return Promise.reject("rmdir: cannot remove ‘"+r+"’: Not a directory")},function(){}).then(function(){return t.system.readDir(r)}).then(function(n){if(n.length)return Promise.reject("rmdir: failed to remove ‘"+r+"’: Directory not empty")}).then(function(){return t.system.remove(r)})})).then(function(){t.exit()},function(r){t.error(r),t.exit(1)})}var Zo=Qo;function ea(t,e){if(!e.length){t.error("touch: missing file operand"),t.exit(1);return}Promise.all(e.map(function(r){return t.system.write(r,"")})).then(function(){t.exit()},function(r){t.error(r),t.exit(1)})}var ta=ea,ra={cat:Wo,cd:Co,cp:Fo,history:ko,ls:Go,mkdir:Ho,mv:zo,pwd:Vo,rm:Xo,rmdir:Zo,touch:ta},na=ra,ot=na;function ia(t){var e=oa(t),r={};function n(c){return ua(e.workingDirectory,c)}function i(c){var u=n(c).split("/").slice(0,-1).join("/");return s.stat(u).then(function(l){return l.type==="dir"?Promise.resolve():Promise.reject(u+": Is not a directory")})}var s={commands:ot,state:e,run:function(c){var u=c.split(" "),l=u.shift();if(e.history.push(c),!ot[l])return Promise.reject(l+": command not found");var f="";return new Promise(function(p,y){ot[l]({output:function(d){f+=d},error:function(d){f+=d},exit:function(d){d?y(f):p(f)},system:s},u)})},getDir:function(){return Promise.resolve(e.workingDirectory)},changeDir:function(c){var u=n(c);return e.fileSystem[u]?(e.workingDirectory=u,Promise.resolve()):Promise.reject(u+": No such file or directory")},read:function(c){var u=n(c);return e.fileSystem[u]?e.fileSystem[u].type!=="file"?Promise.reject(c+": Is a directory"):Promise.resolve(e.fileSystem[u].content):Promise.reject(c+": No such file or directory")},readDir:function(c){var u=n(c);if(!e.fileSystem[u])return Promise.reject("cannot access ‘"+c+"’: No such file or directory");var l=Object.keys(e.fileSystem).filter(function(f){return f.startsWith(u)&&f!==u}).map(function(f){return f.substr(u==="/"?u.length:u.length+1)}).filter(function(f){return!f.includes("/")}).sort();return Promise.resolve(l)},stat:function(c){var u=n(c);if(!e.fileSystem[u])return Promise.reject(c+": No such file or directory");var l=u.split("/");return Promise.resolve({modified:e.fileSystem[u].modified,type:e.fileSystem[u].type,name:l[l.length-1]})},createDir:function(c){return s.stat(c).then(function(){return Promise.reject("cannot create directory '"+c+"': File exists")},function(){return i(c)}).then(function(){var u=n(c);e.fileSystem[u]={type:"dir",modified:Date.now()}})},write:function(c,u){if(typeof u!="string")try{u=JSON.stringify(u)}catch(l){return Promise.reject(l)}return i(c).then(function(){var l=n(c);return s.stat(c).then(function(f){if(f.type!=="file")return Promise.reject(l+": Is a folder");var p=e.fileSystem[l].content;e.fileSystem[l].content=p+u,e.fileSystem[l].modified=Date.now()},function(){e.fileSystem[l]={type:"file",modified:Date.now(),content:u}})})},remove:function(c){var u=n(c);return e.fileSystem[u]?(Object.keys(e.fileSystem).forEach(function(l){l.startsWith(u)&&delete e.fileSystem[l]}),Promise.resolve()):Promise.reject("cannot remove ‘"+c+"’: No such file or directory")},copy:function(c,u){var l=n(c),f=n(u);if(!e.fileSystem[l])return Promise.reject(c+": No such file or directory");function p(y){if(y.startsWith(l)){var d=y.replace(l,f);e.fileSystem[d]=e.fileSystem[y]}}return i(f).then(function(){Object.keys(e.fileSystem).forEach(p)})},getHistory:function(){return Promise.resolve(e.history)},completeUp:function(c){var u=r.historySize!==e.history.length,l=c!==r.input;if(l||u)r.input=c,r.index=0,r.historySize=e.history.length,r.list=e.history.filter(function(f){return f.startsWith(c)}).reverse();else if(r.index<r.list.length-1)r.index++;else return Promise.resolve(void 0);return Promise.resolve(r.list[r.index])},completeDown:function(c){return c!==r.input||!r.index?Promise.resolve(void 0):(r.index--,Promise.resolve(r.list[r.index]))}};return s}function oa(t){var e=aa();return t&&Object.keys(e).forEach(function(r){t[r]&&(e[r]=t[r])}),e}function aa(){return{history:[],fileSystem:{"/":{type:"dir",modified:Date.now()},"/home":{type:"dir",modified:Date.now()},"/home/user":{type:"dir",modified:Date.now()}},user:"user",workingDirectory:"/home/user"}}function ua(t,e){if(!e)return t;for(var r=(e.charAt(0)==="/"?"":t+"/")+e,n=r.split("/").filter(function(l){return!!l}),i=0,s=n.length-1;s>=0;s--){var c=n[s];c==="."?n.splice(s,1):c===".."?(n.splice(s,1),i++):i&&(n.splice(s,1),i--)}return"/"+n.join("/")}var vr=ia;const sa=()=>{let t;if(!localStorage.bashEmulator)t=vr({workingDirectory:"/",fileSystem:{"/":{type:"dir",modified:Date.now()}}});else{var e=JSON.parse(localStorage.bashEmulator||"{}");t=vr(e)}return t},x=sa();x.commands.commands=t=>{t.output(`Available commands:
`),t.output(Object.keys(x.commands).join(`
`)),t.exit()};x.commands.clear=(t,e)=>{t.output("pleaseclear"),t.exit()};x.commands.exit=(t,e)=>{t.output("exitnowplease"),t.exit()};x.commands.edit=(t,e)=>{if(e.join("").trim().length==0){t.error("No file to open"),t.exit();return}document.querySelector("window-manager").createNewWindow(gr.new(e[0])),t.exit()};x.commands.iframe=(t,e)=>{if(e.join("").trim().length==0){t.error("No file to open"),t.exit();return}document.querySelector("window-manager").createNewWindow(wr.new(e[0])),t.exit()};function ca(t,e){if(t==0)return"0 Bytes";var r=1024,n=e||2,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,s)).toFixed(n))+" "+i[s]}var la=()=>ca(1024*1024*5-escape(encodeURIComponent(JSON.stringify(localStorage))).length,2);const Gr=()=>{localStorage.bashEmulator=JSON.stringify(x.state),document.querySelector(".status-indicator").innerText=`Storage left: ${la()}`};class pt extends me{constructor(){super()}static new(){let e=document.createElement("terminal-emulator");return console.log(e),e}set content(e){this._content=e,this.querySelector(".terminal-emulator-content")&&(this.querySelector(".terminal-emulator-content").innerText=e)}get content(){return this._content}error(e){e&&(this.content=this.content+e+`
`)}run(e){return this.log(`$ ${e}`),x.run(e).then(r=>{this.log(r)},r=>{this.error(r)}).then(Gr)}log(e){if(e=="pleaseclear"){this.content="";return}if(e=="exitnowplease"){this.removeWindow();return}e&&(this.content=this.content+e+`
`,this.querySelector(".terminal-emulator-content").scrollTop=this.querySelector(".terminal-emulator-content").scrollHeight)}customFocus(){this.windowManager.selectedWindow=this,this.querySelector(".terminal-emulator-input").focus()}connectedCallback(){this.created||(this.created=!0,this.title="terminal emulator",this.content="",this.innerHTML=`
        <div class="window-titlebar">
          <p class="window-title">${this.title}</p>
          <div class="window-buttons">     
            <i class="ti ti-x window-close-button"></i>
          </div>
        </div>
        <div class="window-terminal-content">
          <p class='terminal-emulator-content' spellcheck='false'></p>
          <input type='text' class='terminal-emulator-input'></input>
        </div>
      `,this.terminal_emulator_content=this.querySelector(".terminal-emulator-content"),this.terminal_emulator_content.innerHTML=this.content,this.classList.add("window-container"),this.querySelector(".window-title").innerHTML=this.title,this.terminal_emulator_input=this.querySelector(".terminal-emulator-input"),this.terminal_emulator_input.addEventListener("keydown",e=>{console.log(e);let r=this.terminal_emulator_input;e.key=="Enter"&&r.value.trim().length!=0&&(this.run(r.value),r.value="")}),this.querySelector(".window-close-button").addEventListener("click",()=>{this.removeWindow()}),this.addEventListener("mouseover",()=>{this.customFocus()}),this.run("pwd"))}}customElements.define("terminal-emulator",pt);class fa extends HTMLElement{constructor(){super()}get windowColumns(){return this.querySelectorAll(".window-column")}get allWindows(){return this.querySelectorAll(".window-container")}get selectedWindow(){return this._selectedWindow==null?(this._selectedWindow=this.querySelector(".window-container"),this._selectedWindow):this._selectedWindow}set selectedWindow(e){this.selectedWindow.classList.remove("selected-window"),this._selectedWindow=e,this._selectedWindow!=null&&(this._selectedWindow!=e&&this._selectedWindow.customFocus(),console.log(document.activeElement,e),e.classList.add("selected-window"))}createNewColumn(e){let r=document.createElement("window-column");return r.classList.add("window-column"),e>0?this.appendChild(r):this.prepend(r),r}moveSelectedWindowHorizontally(e){let r=this.selectedWindow.parentElement,n=Array.from(this.children),i=n.indexOf(r)+e,s=i<0||i>n.length-1;if(r.children.length>1)s?this.createNewColumn(e).appendChild(this.selectedWindow):n[i].appendChild(this.selectedWindow);else if(!s){let u=n[i];this.selectedWindow.parentElement.remove(),u.appendChild(this.selectedWindow)}}moveSelectedWindowVertically(e){}selectWindowInColumn(e){let r=this.selectedWindow.parentElement,n=Array.from(r.children),i=n.indexOf(this.selectedWindow)+e;i<0&&(i=n.length+e),i>n.length-1&&(i=0),this.selectedWindow=n[i]}selectWindowInRow(e){let r=this.selectedWindow.parentElement,n=Array.from(this.children),i=n.indexOf(r)+e;i<0&&(i=n.length+e),i>n.length-1&&(i=0);let s=n[i].children[0];this.selectedWindow=s}createNewWindow(e){let r=e;this.querySelector("window-column")||this.appendChild(document.createElement("window-column")),this.querySelector("window-column").appendChild(r),this.selectedWindow=r}connectedCallback(){this.createNewWindow(pt.new()),document.addEventListener("keydown",e=>{if(e.key=="ArrowDown"&&e.shiftKey&&e.ctrlKey){this.moveSelectedWindowVertically(1);return}if(e.key=="ArrowDown"&&e.ctrlKey){this.selectWindowInColumn(1);return}if(e.key=="ArrowUp"&&e.shiftKey&&e.ctrlKey){this.moveSelectedWindowVertically(-1);return}if(e.key=="ArrowUp"&&e.ctrlKey){this.selectWindowInColumn(-1);return}if(e.key=="ArrowLeft"&&e.shiftKey&&e.ctrlKey){this.moveSelectedWindowHorizontally(-1);return}if(e.key=="ArrowLeft"&&e.ctrlKey){this.selectWindowInRow(-1);return}if(e.key=="ArrowRight"&&e.shiftKey&&e.ctrlKey){this.moveSelectedWindowHorizontally(1);return}if(e.key=="ArrowRight"&&e.ctrlKey){this.selectWindowInRow(1);return}if(e.key=="Enter"&&e.shiftKey&&e.ctrlKey){this.createNewWindow(pt.new());return}if(e.key=="Q"&&e.ctrlKey){this.selectedWindow.removeWindow(),this.selectedWindow=this.querySelector(".window-container");return}})}}customElements.define("window-manager",fa);document.querySelector("#app").innerHTML=`
  <main>
    <status-bar>
      <div class="branding-container">
        <img src="./src/img/monkey.svg" class="brand-logo">
        <p>aesthetic programming environment</p>
      </div>
      <status-indicator class="status-indicator">
        <i class="ti ti-database"></i>
        <p>1kB/10mB</p>
      </status-indicator>
    </status-bar>
    <window-manager>

    </window-manager>
  </main>
`;
